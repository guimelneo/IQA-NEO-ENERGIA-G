<!DOCTYPE html>

<html lang="pt-BR">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Gerador de Atendimento - Neoenergia</title>

  <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Neoenergia_logo.svg/1200px-Neoenergia_logo.svg.png">

  <!-- Font Awesome para √≠cones -->

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>

    /* CSS Custom Properties (Variables) */

    :root {

      /* Default (Dark Mode) Colors */

      --main-bg-color: #000000; /* Fundo principal da p√°gina */

      --container-bg-color: #000000; /* Fundo dos blocos principais (formul√°rio, se√ß√µes de info) */

      --main-text-color: #FFFFFF; /* Cor do texto geral da p√°gina */

      --label-color: #EEEEEE; /* Cor das labels (geral, n√£o as verdes espec√≠ficas) */

      --input-bg-color: #444444; /* Fundo dos campos */

      --input-border-color: #555555; /* Borda dos campos de entrada */

      --input-text-color: #FFFFFF; /* Cor do texto dentro dos campos de entrada */

      --copy-button-bg: #4CAF50; /* Fundo do bot√£o Copiar/Alternar */

      --copy-button-text: #FFFFFF; /* Texto do bot√£o Copiar/Alternar */

      --clear-button-bg: #e0e0e0; /* Fundo do bot√£o Limpar */
      --clear-button-text: #000000; /* Texto do bot√£o Limpar */

      --secondary-button-bg-color: #555555; /* Nova vari√°vel para bot√µes secund√°rios */
      --secondary-button-hover-bg-color: #777777; /* Nova vari√°vel para hover de bot√µes secund√°rios */
      --button-text-color: #FFFFFF; /* Cor do texto para bot√µes secund√°rios */


      --output-bg-color: #222222; /* Fundo da √°rea de sa√≠da e conte√∫do de informa√ß√µes */

      --output-text-color: #FFFFFF; /* Texto da √°rea de sa√≠da e conte√∫do de informa√ß√µes */

      --output-border-color: #555555; /* Borda da √°rea de sa√≠da e conte√∫do de informa√ß√µes */

      --history-item-bg-color: #222222; /* Fundo dos itens do hist√≥rico */

      --history-item-border-color: #333333; /* Borda dos itens do hist√≥rico */

      --history-item-text-color: #FFFFFF; /* Texto dos itens do hist√≥rico */

      --modal-bg-color: #222222; /* Fundo dos modais */

      --modal-text-color: #FFFFFF; /* Texto dos modais */

      --modal-border-color: #555555; /* Borda dos modais */

      --search-input-bg-color: #444444; /* Fundo dos campos de pesquisa */

      --search-input-text-color: #FFFFFF; /* Texto dos campos de pesquisa */

      --search-input-border-color: #555555; /* Borda dos campos de pesquisa */

      --highlight-green: #4CAF50; /* Cor verde para destaque (ex: logo, labels espec√≠ficas) */

      --highlight-light-green: #6dff73; /* Cor verde claro para subt√≠tulos de destaque */

      --field-bg-alpha: 0.7; /* Opacidade padr√£o para campos quando imagem de fundo presente */

      --highlight-search-bg: #FFFF00; /* Fundo do destaque da pesquisa */

      --highlight-search-text: #000000; /* Cor do texto do destaque da pesquisa */

    }



    /* Light Mode Overrides (if light-mode class is active) */

    /* APENAS as cores que DEVEM MUDAR no modo claro */

    body.light-mode {

      --main-bg-color: #f0f0f0; /* Fundo principal da p√°gina CLARO */

      --container-bg-color: #FFFFFF; /* Fundo dos blocos principais (formul√°rio, se√ß√µes de info) CLARO */

      --main-text-color: #333333; /* Cor do texto geral da p√°gina CLARO */

      --label-color: #555555; /* Cor das labels (geral, n√£o as verdes espec√≠ficas) CLARO */

      --clear-button-bg: #cccccc; /* Fundo do bot√£o Limpar CLARO */

      --clear-button-text: #333333; /* Texto do bot√£o Limpar CLARO */
      
      --secondary-button-bg-color: #AAAAAA; /* Nova vari√°vel para bot√µes secund√°rios CLARO */
      --secondary-button-hover-bg-color: #BBBBBB; /* Nova vari√°vel para hover de bot√µes secund√°rios CLARO */
      --button-text-color: #333333; /* Cor do texto para bot√µes secund√°rios CLARO */


      --input-bg-color: #f8f8f8; /* Fundo dos campos de entrada CLARO */

      --input-border-color: #cccccc; /* Borda dos campos de entrada CLARO */

      --input-text-color: #333333; /* Cor do texto dentro dos campos de entrada CLARO */

      --output-bg-color: #f9f9f9; /* Fundo da √°rea de sa√≠da e conte√∫do de informa√ß√µes CLARO */

      --output-text-color: #333333; /* Texto da √°rea de sa√≠da e conte√∫do de informa√ß√µes CLARO */

      --output-border-color: #dddddd; /* Borda da √°rea de sa√≠da e conte√∫do de informa√ß√µes CLARO */

      --history-item-bg-color: #f9f9f9; /* Fundo dos itens do hist√≥rico CLARO */

      --history-item-border-color: #dddddd; /* Borda dos itens do hist√≥rico CLARO */

      --history-item-text-color: #333333; /* Texto dos itens do hist√≥rico CLARO */

      --modal-bg-color: #f9f9f9; /* Fundo dos modais CLARO */

      --modal-text-color: #333333; /* Texto dos modais CLARO */

      --modal-border-color: #dddddd; /* Borda dos modais CLARO */

      --search-input-bg-color: #f8f8f8; /* Fundo dos campos de pesquisa CLARO */

      --search-input-text-color: #333333; /* Texto dos campos de pesquisa CLARO */

      --search-input-border-color: #cccccc; /* Borda dos campos de pesquisa CLARO */

    }



    /* Reset b√°sico para garantir que n√£o haja margens/padding padr√£o no html/body */

    html, body {

      margin: 0;

      padding: 0;

      height: 100%; /* Garante que o body ocupe a altura total da viewport */

    }



    body {

      font-family: Arial, sans-serif;

      background-color: var(--main-bg-color); /* Usando vari√°vel CSS */

      color: var(--main-text-color); /* Usando vari√°vel CSS */

      display: flex;

      flex-direction: column; /* Para empilhar o formul√°rio e as se√ß√µes de consulta/hist√≥rico */

      justify-content: flex-start; /* Alinha no topo */

      align-items: center; /* Centraliza horizontalmente */

      min-height: 100vh;

      padding: 20px; /* Mant√©m o padding externo para os containers n√£o colarem nas bordas */

      box-sizing: border-box;

      position: relative; /* Adicionado para posicionar o bot√£o de tema */

      transition: background-color 0.3s ease, color 0.3s ease, font-size 0.3s ease; /* Adicionado para transi√ß√£o suave */

      font-size: 16px; /* Tamanho de fonte base, ser√° controlado pelo JS */


      /* Background image properties */

      background-size: cover;

      background-position: center;

      background-attachment: fixed;

      background-repeat: no-repeat;

    }



    /* Regra para cont√™ineres/se√ß√µes principais serem TOTALMENTE transparentes quando h√° imagem de fundo */

    body.has-background-image .container,

    body.has-background-image .info-section,

    body.has-background-image #outputContainer {

      background-color: transparent !important; /* Torna o fundo do cont√™iner principal transparente */

      border: none !important;

      box-shadow: none !important;

    }



    /* Regra para campos interativos e √°reas de conte√∫do serem PRETO TRANSPARENTE quando h√° imagem de fundo */

    body.has-background-image input[type="text"],

    body.has-background-image input[type="tel"],

    body.has-background-image select,

    body.has-background-image textarea, /* Afeta #observacoes, #notepadContent, #outputContent, #personalPasswordsContent */

    body.has-background-image .search-input, /* Campos de pesquisa */

    body.has-background-image .history-item, /* Itens individuais do hist√≥rico */

    body.has-background-image .info-content { /* Divs de conte√∫do das se√ß√µes de informa√ß√£o (n√£o textareas) */

      background-color: rgba(0, 0, 0, var(--field-bg-alpha)) !important; /* Preto com opacidade controlada pelo slider */

      border: none !important; /* Remove borda */

      box-shadow: none !important; /* Remove sombra */

      color: var(--input-text-color) !important; /* Mant√©m a cor do texto (geralmente branco) */

    }



    /* Ajuste espec√≠fico para as op√ß√µes dentro dos selects quando h√° imagem de fundo */

    body.has-background-image select option {

      background-color: rgba(0, 0, 0, var(--field-bg-alpha)) !important;

      color: var(--input-text-color) !important;

    }



    /* Estilos base para cont√™ineres e se√ß√µes (usar√£o as vars do root, que s√£o escuras) */

    .container, .info-section {

      background-color: var(--container-bg-color);

      padding: 30px;

      border-radius: 8px;

      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);

      width: 100%;

      max-width: 600px;

      box-sizing: border-box;

      margin-bottom: 20px;

      transition: background-color 0.3s ease, box-shadow 0.3s ease;

    }



    .logo {

      text-align: center;

      margin-bottom: 20px;

      font-size: 1.8em;

      font-weight: bold;

      color: var(--highlight-green);

      text-transform: uppercase;

    }



    .logo .creator-signature {

      font-size: 0.5em;

      color: var(--highlight-green);

      display: block;

      margin-top: 5px;

    }



    .form-group {

      margin-bottom: 15px;

    }



    label {

      display: block;

      margin-bottom: 5px;

      font-weight: bold;

      color: var(--label-color);

      transition: color 0.3s ease;

    }



    /* Labels espec√≠ficas em verde */

    label[for="empresa"],

    label[for="nome"],

    label[for="ucCpf"],

    label[for="telefone"],

    label[for="motivo"],

    label[for="referencia"],

    label[for="observacoes"] {

      color: var(--highlight-green);

    }



    /* Estilos base para inputs, selects e textareas (usar√£o as vars do root, que s√£o escuras) */

    input[type="text"],

    input[type="tel"],

    select,

    textarea {

      width: calc(100% - 22px);

      padding: 10px;

      border: 1px solid var(--input-border-color);

      border-radius: 4px;

      background-color: var(--input-bg-color);

      color: var(--input-text-color);

      font-size: 1em; /* Usar 'em' para que se ajuste ao font-size do body */

      box-sizing: border-box;

      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;

    }



    select option {

      background-color: var(--input-bg-color);

      color: var(--input-text-color);

    }



    select option:checked {

      background-color: var(--input-border-color);

    }



    textarea {

      resize: vertical;

      min-height: 80px;

    }



    .copy-button, .toggle-button {

      background-color: var(--copy-button-bg);

      color: var(--copy-button-text);

      padding: 12px 20px;

      border: none;

      border-radius: 4px;

      cursor: pointer;

      font-size: 1.1em;

      width: 100%;

      margin-top: 10px;

      text-transform: uppercase;

    }



    .copy-button:hover, .toggle-button:hover {

      filter: brightness(0.9);

    }



    .clear-form-button, .clear-button {

      background-color: var(--clear-button-bg);

      color: var(--clear-button-text);

      padding: 8px 12px;

      border: none;

      border-radius: 4px;

      cursor: pointer;

      font-size: 0.9em;

      text-transform: uppercase;

      margin-top: 10px;

      transition: background-color 0.2s ease, color 0.2s ease;

    }



    .clear-form-button:hover, .clear-button:hover {

      filter: brightness(0.9);

    }



    .clear-form-button {

      width: auto;

      display: block;

      margin: 10px auto;

    }



    .search-input {

      width: calc(100% - 22px);

      padding: 8px;

      margin-bottom: 15px;

      border: 1px solid var(--search-input-border-color);

      border-radius: 4px;

      background-color: var(--search-input-bg-color);

      color: var(--search-input-text-color);

      font-size: 0.9em; /* Usar 'em' */

      box-sizing: border-box;

      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;

    }



    #outputContainer {

      margin-top: 20px;

      background-color: var(--output-bg-color);

      padding: 15px;

      border-radius: 4px;

      border: 1px solid var(--output-border-color);

      transition: background-color 0.3s ease, border-color 0.3s ease;

    }



    #outputContent {

      width: 100%;

      min-height: 150px;

      background-color: var(--output-bg-color);

      color: var(--output-text-color);

      border: none;

      resize: vertical;

      font-family: 'Courier New', Courier, monospace;

      font-size: 0.95em; /* Usar 'em' */

      box-sizing: border-box;

      padding: 5px;

      transition: background-color 0.3s ease, color 0.3s ease;

    }



    #observacoes { 

      min-height: 60px;

    }

    /* Ajuste do tamanho do Bloco de Notas */

    #notepadContent { 

      min-height: 750px; /* Aumentado para ser uma op√ß√£o maior ainda */

    }

    /* Novo estilo para a se√ß√£o de Senhas Pessoais */

    #personalPasswordsContent {

      min-height: 150px; /* Altura n√£o muito grande */

    }



    /* Estilo para o conte√∫do do formul√°rio (para ser escondido/mostrado) */

    #formContent {

      display: block; /* Padr√£o vis√≠vel */

      transition: opacity 0.3s ease-in-out;

    }



    .info-section h2 {

      text-align: center;

      margin-bottom: 20px;

      color: var(--highlight-green);

    }

    /* Estilo para alinhar √≠cones com o texto do h2 */

    .info-section h2 i {

      margin-right: 8px;

    }

    /* Estilo para o contador de hist√≥rico */

    .history-counter {

      display: inline-flex; /* Use flexbox to center content */

      justify-content: center;

      align-items: center;

      background-color: var(--highlight-green); /* Cor de destaque */

      color: var(--copy-button-text); /* Cor do texto do bot√£o de c√≥pia */

      border-radius: 50%; /* Torna-o um c√≠rculo */

      width: 24px; /* Tamanho do c√≠rculo */

      height: 24px;

      font-size: 0.8em; /* Usar 'em' */

      font-weight: bold;

      margin-left: 10px; /* Espa√ßo do t√≠tulo */

      vertical-align: middle; /* Alinha verticalmente com o texto */

    }



    .info-content {

      white-space: pre-wrap;

      word-wrap: break-word;

      font-family: 'Courier New', Courier, monospace;

      font-size: 0.9em; /* Usar 'em' */

      background-color: var(--output-bg-color);

      padding: 15px;

      border-radius: 4px;

      border: 1px solid var(--output-border-color);

      max-height: 500px;

      overflow-y: auto;

      display: none;

      transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;

      color: var(--output-text-color);

    }



    .history-item {

      background-color: var(--history-item-bg-color);

      padding: 10px;

      border-radius: 4px;

      margin-bottom: 10px;

      border: 1px solid var(--history-item-border-color);

      display: flex;

      flex-direction: column;

      gap: 5px;

      transition: background-color 0.3s ease, border-color 0.3s ease;

    }



    .history-item-content {

      white-space: pre-wrap;

      word-wrap: break-word;

      font-family: 'Courier New', Courier, monospace;

      font-size: 0.9em; /* Usar 'em' */

      color: var(--history-item-text-color);

    }



    .history-item-actions {

      display: flex;

      justify-content: flex-end; /* Alinha os bot√µes √† direita */

      margin-top: 5px;

      gap: 5px; /* Espa√ßo entre os bot√µes */

    }



    .history-item-copy-button, .history-item-delete-button, .copy-all-button {

      padding: 5px 10px; /* Reduz o padding */

      border: none;

      border-radius: 4px;

      cursor: pointer;

      font-size: 0.8em; /* Usar 'em' */

      text-transform: none; /* Remove uppercase */

      width: auto; /* Permite que o width seja ajustado ao conte√∫do */

      flex-grow: 0; /* N√£o permite que os bot√µes se expandam */

    }



    .history-item-copy-button:hover, .copy-all-button:hover {

      filter: brightness(0.9);

    }



    .history-item-delete-button {

      background-color: #f44336;

      color: white;

    }



    .history-item-delete-button:hover {

      filter: brightness(0.9);

    }



    .copy-all-button {

      background-color: var(--copy-button-bg); /* Use a cor do bot√£o de c√≥pia principal */

      color: var(--copy-button-text);

      margin-left: 10px; /* Espa√ßamento √† esquerda do bot√£o */

    }



    .custom-modal-overlay {

      position: fixed;

      top: 0;

      left: 0;

      width: 100%;

      height: 100%;

      background-color: rgba(0, 0, 0, 0.7);

      display: flex;

      justify-content: center;

      align-items: center;

      z-index: 1000;

    }



    .custom-modal {

      background-color: var(--modal-bg-color);

      padding: 30px;

      border-radius: 8px;

      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);

      max-width: 400px;

      width: 90%;

      text-align: center;

      color: var(--modal-text-color);

      border: 1px solid var(--modal-border-color);

      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;

    }



    .custom-modal p {

      margin-bottom: 20px;

      font-size: 1.1em; /* Usar 'em' */

      word-wrap: break-word;

    }



    .custom-modal .modal-buttons button {

      background-color: var(--highlight-green);

      color: white;

      padding: 10px 20px;

      border: none;

      border-radius: 4px;

      cursor: pointer;

      font-size: 1em; /* Usar 'em' */

      margin: 0 10px;

    }



    .custom-modal .modal-buttons button:hover {

      filter: brightness(0.9);

    }



    .custom-modal .modal-buttons button.cancel {

      background-color: #f44336;

    }



    .custom-modal .modal-buttons button.cancel:hover {

      filter: brightness(0.9);

    }



    #appFeedback { /* Changed ID from copyFeedback to appFeedback */

      position: fixed;

      bottom: 20px;

      left: 50%;

      transform: translateX(-50%);

      background-color: var(--highlight-green);

      color: white;

      padding: 10px 20px;

      border-radius: 5px;

      opacity: 0;

      transition: opacity 0.5s ease-in-out;

      z-index: 1000;

    }



    /* Removed #modeToggleButton styles as the button is removed */



    /* Estilos para espa√ßamento em Informa√ß√µes Adicionais e Personaliza√ß√£o de Cores */

    #additionalInfoContent h2, #colorCustomizationContent h2 {

      margin-top: 30px;

      margin-bottom: 15px;

      text-align: left;

      color: #4CAF50;

      font-size: 1.2em; /* Usar 'em' */

      border-bottom: 2px solid #4CAF50;

      padding-bottom: 5px;

    }



    #additionalInfoContent h3, #colorCustomizationSection h3 { /* Added #colorCustomizationSection for h3 */

      margin-top: 20px;

      margin-bottom: 10px;

      text-align: left;

      color: var(--highlight-light-green);

      font-size: 1.1em; /* Usar 'em' */

    }



    #additionalInfoContent p, #colorCustomizationContent p {

      margin-bottom: 10px;

      line-height: 1.5;

    }



    #additionalInfoContent hr, #colorCustomizationContent hr {

      margin-top: 20px;

      margin-bottom: 20px;

      border-color: #777;

      border-width: 1px;

      border-style: solid;

    }



    #additionalInfoContent ul, #colorCustomizationContent ul { /* Changed to select both ul/ol */

      margin-top: 5px;

      margin-bottom: 10px;

      padding-left: 25px;

    }



    #additionalInfoContent li, #colorCustomizationContent li {

      margin-bottom: 5px;

    }



    #additionalInfoContent hr.double-line, #colorCustomizationContent hr.double-line {

      border-style: double;

      border-width: 3px;

      border-color: var(--highlight-green);

      margin: 40px 0;

    }



    /* Estilos para os color pickers */

    .color-picker-group {

      display: flex;

      align-items: center;

      margin-bottom: 10px;

    }



    .color-picker-group label {

      flex: 1;

      margin-bottom: 0;

    }



    .color-picker-group input[type="color"] {

      width: 80px;

      height: 30px;

      padding: 0;

      border: 1px solid var(--input-border-color);

      border-radius: 4px;

      background: none;

      cursor: pointer;

    }



    /* Estilos para os bot√µes de tema */

    .theme-buttons {

      display: flex;

      flex-wrap: wrap;

      gap: 10px;

      margin-top: 15px;

      justify-content: center;

    }



    .theme-select-button {

      width: auto;

      padding: 10px 15px;

      font-size: 0.9em; /* Usar 'em' */

      background-color: var(--clear-button-bg);

      color: var(--clear-button-text);

      border: none;

      border-radius: 4px;

      cursor: pointer;

      text-transform: uppercase;

      transition: background-color 0.2s ease, color 0.2s ease;

    }



    .theme-select-button:hover {

      filter: brightness(0.9);

    }



    .theme-select-button.active {

      border: 2px solid var(--highlight-green);

      box-shadow: 0 0 8px var(--highlight-green);

    }



    /* Novo estilo para o destaque de pesquisa */

    .highlight {

      background-color: var(--highlight-search-bg);

      color: var(--highlight-search-text);

      font-weight: bold;

      padding: 2px 4px;

      border-radius: 3px;

    }



    /* Estilos para a Zona de Recrea√ß√£o e Jogos */

    #recreationContent {

      text-align: center;

    }



    #gameSelectionButtons {

      margin-bottom: 20px;

      display: flex;

      flex-wrap: wrap;

      justify-content: center;

      gap: 10px;

    }



    #gameSelectionButtons button {

      padding: 10px 15px;

      border: none;

      border-radius: 5px;

      background-color: var(--copy-button-bg);

      color: var(--copy-button-text);

      cursor: pointer;

      transition: background-color 0.2s ease;

    }



    #gameSelectionButtons button:hover {

      filter: brightness(0.9);

    }



    #gameSelectionButtons button.active-game {

      border: 2px solid var(--highlight-light-green);

      box-shadow: 0 0 8px var(--highlight-light-green);

    }



    .game-container {

      border: 1px solid var(--input-border-color);

      border-radius: 8px;

      padding: 15px;

      background-color: var(--input-bg-color);

      margin-top: 15px;

    }



    /* Game mode selection styles (radio buttons) */

    .game-mode-selection, .game-difficulty-selection {

      margin-bottom: 15px;

      display: flex;

      justify-content: center;

      gap: 15px;

      flex-wrap: wrap; /* Allow wrapping for smaller screens */
    }

    .game-mode-selection label, .game-difficulty-selection label {

      display: flex;

      align-items: center;

      cursor: pointer;

      font-weight: normal; /* Override bold label */

      color: var(--label-color);

    }

    .game-mode-selection input[type="radio"], .game-difficulty-selection input[type="radio"] {

      margin-right: 5px;

      transform: scale(1.2); /* Make radio buttons slightly larger */

    }





    /* Snake Game Styles */

    #snakeCanvas {

      background-color: #333;

      border: 2px solid var(--highlight-green);

      display: block;

      margin: 0 auto;

    }

    #snakeGameControls button {

      margin: 5px;

      padding: 8px 15px;

      font-size: 0.9em; /* Usar 'em' */

    }

    #snakeScore {

      color: var(--highlight-light-green);

      font-size: 1.2em; /* Usar 'em' */

      margin-top: 10px;

    }



    /* Damas Game Styles */

    #checkersBoard {

      display: grid;

      grid-template-columns: repeat(8, 40px);

      grid-template-rows: repeat(8, 40px);

      width: 320px; /* 8 * 40px */

      height: 320px; /* 8 * 40px */

      border: 2px solid var(--highlight-green);

      margin: 20px auto;

    }

    .checker-cell {

      width: 40px;

      height: 40px;

      display: flex;

      justify-content: center;

      align-items: center;

      font-size: 1.5em; /* For pieces - Usar 'em' */

      cursor: pointer;

    }

    .checker-cell.dark {

      background-color: #555;

    }

    .checker-cell.light {

      background-color: #aaa;

    }

    .checker-cell.dark.selectable {

      background-color: #777; /* Slightly lighter dark cell for selection */

    }

    .checker-cell.dark.selected {

      background-color: #007bff; /* Blue for selected piece */

    }

    .checker-cell.dark.possible-move {

      background-color: #28a745; /* Green for possible moves */

    }

    .checker-piece {

      width: 30px;

      height: 30px;

      border-radius: 50%;

      display: flex;

      justify-content: center;

      align-items: center;

      font-weight: bold;

      color: white;

      box-shadow: 0 2px 4px rgba(0,0,0,0.5);

      line-height: 1; /* Adjust for better vertical alignment of text/emoji */

    }

    .checker-piece.red {

      background-color: #e74c3c;

    }

    .checker-piece.black {

      background-color: #34495e;

    }

    .checker-piece.king {

      box-shadow: 0 0 0 3px gold, 0 2px 4px rgba(0,0,0,0.5);

    }

    #checkersStatus {

      color: var(--highlight-light-green);

      margin-top: 10px;

    }

    #checkersControls button {

      margin-top: 10px;

      padding: 8px 15px;

      font-size: 0.9em; /* Usar 'em' */

    }



    /* Tic-Tac-Toe Styles */

    #ticTacToeBoard {

      display: grid;

      grid-template-columns: repeat(3, 80px);

      grid-template-rows: repeat(3, 80px);

      width: 240px;

      height: 240px;

      border: 2px solid var(--input-border-color); /* Updated border color */

      margin: 20px auto;

    }

    .tic-tac-toe-cell {

      width: 80px;

      height: 80px;

      border: 1px solid var(--input-border-color);

      display: flex;

      justify-content: center;

      align-items: center;

      font-size: 3em; /* Usar 'em' */

      font-weight: bold;

      cursor: pointer;

      transition: background-color 0.2s ease;

    }

    .tic-tac-toe-cell:hover {

      background-color: rgba(255, 255, 255, 0.1);

    }

    .tic-tac-toe-cell.x {

      color: #e74c3c;

    }

    .tic-tac-toe-cell.o {

      color: #3498db;

    }

    #ticTacToeStatus {

      color: var(--highlight-light-green);

      margin-top: 10px;

    }

    #ticTacToeControls button {

      margin-top: 10px;

      padding: 8px 15px;

      font-size: 0.9em; /* Usar 'em' */

    }



    /* Tetris Styles */

    #tetrisGameCanvas {

      background-color: #000;

      border: 2px solid #00FFFF; /* Cyan for Tetris */

      display: block;

      margin: 0 auto;

    }

    #tetrisGameInfo {

      display: flex;

      justify-content: center;

      align-items: center; /* Align items vertically in the center */

      gap: 20px;

      margin-top: 10px;

      color: #00FFFF;

      font-size: 1.2em; /* Usar 'em' */

    }

    #tetrisNextPieceCanvas {

      background-color: #333;

      border: 1px solid #00FFFF;

      margin-top: 0; /* Adjusted margin */

    }

    #tetrisGameControls button {

      margin: 5px;

      padding: 8px 15px;

      font-size: 0.9em; /* Usar 'em' */

    }



    /* Estilos para os controles de tamanho da fonte */
    .customization-option {
      margin-bottom: 15px;
    }

    .custom-label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: var(--label-color);
    }

    .font-size-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .action-button-mini {
      background-color: var(--secondary-button-bg-color);
      color: var(--button-text-color);
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em; /* Usar 'em' */
      display: flex;
      align-items: center;
      gap: 5px;
      transition: background-color 0.3s ease;
    }

    .action-button-mini:hover {
      background-color: var(--secondary-button-hover-bg-color);
    }

  </style>

</head>

<body>

  <div class="container">

    <div class="logo">

      NEOENERGIA

      <span class="creator-signature">by Gu√≠mel ü§ò</span>

    </div>

    <!-- Novo bot√£o para mostrar/esconder o formul√°rio -->

    <button class="toggle-button" id="toggleFormButton" style="margin-bottom: 20px;">Mostrar/Esconder Formul√°rio</button>



    <div id="formContent"> <!-- Conte√∫do do formul√°rio agrupado para toggle -->

      <div class="form-group">

        <label for="empresa">EMPRESA:</label>

        <select id="empresa">

          <option value="">Selecione a empresa</option>

          <option value="Coelba">Coelba</option>

          <option value="Celpe">Celpe</option>

          <option value="Cosern">Cosern</option>

          <option value="Elektro">Elektro</option>

          <option value="Brasilia">Bras√≠lia</option>

        </select>

      </div>



      <div class="form-group">

        <label for="nome">NOME:</label>

        <input type="text" id="nome">

      </div>



      <div class="form-group">

        <label for="ucCpf">UC/CPF:</label>

        <input type="text" id="ucCpf">

      </div>



      <div class="form-group">

        <label for="telefone">TELEFONE:</label>

        <input type="tel" id="telefone">

      </div>



      <div class="form-group">

        <label for="motivo">MOTIVO:</label>

        <select id="motivo">

          <option value="">Selecione o motivo</option>

        </select>

      </div>



      <div id="subtipoDerivacaoContainer" style="display: none;">

        <div class="form-group">

          <label for="subtipo">SUBTIPO:</label>

          <select id="subtipo">

            <option value="">Selecione o subtipo</option>

          </select>

        </div>

        <div class="form-group" id="derivacaoFormGroup" style="display: none;">

          <label for="derivacao">DERIVA√á√ÉO:</label>

          <select id="derivacao">

            <option value="">Selecione a deriva√ß√£o</option>

          </select>

        </div>

      </div>



      <div class="form-group">

        <label for="referencia">REFERENCIA:</label>

        <input type="text" id="referencia">

      </div>



      <div class="form-group">

        <label for="observacoes">PROTOCOLO:</label>

        <textarea id="observacoes" placeholder="Insira o protocolo de atendimento ou outras informa√ß√µes."></textarea>

      </div>



      <button class="copy-button" id="copyButton">COPIAR</button>

      <button class="clear-form-button" id="clearFormButton">LIMPAR FORMUL√ÅRIO</button>



      <div id="outputContainer">

        <textarea id="outputContent"></textarea>

      </div>

    </div> <!-- Fim do formContent -->

  </div>



  <!-- Novo Bloco de Notas -->

  <div id="notepadSection" class="info-section">

    <h2><i class="fas fa-clipboard"></i> Bloco de Notas</h2>

    <button class="toggle-button" id="toggleNotepadButton">Mostrar/Esconder Bloco</button>

    <button class="clear-button" id="clearNotepadButton">LIMPAR BLOCO</button>

    <button class="copy-all-button" id="copyNotepadButton">COPIAR TUDO</button> <!-- Novo bot√£o "Copiar Tudo" -->

    <textarea id="notepadContent" class="info-content" placeholder="Escreva suas anota√ß√µes aqui..."></textarea>

  </div>

  <!-- Fim do Novo Bloco de Notas -->



  <!-- Nova Se√ß√£o de Senhas Pessoais e Logins -->

  <div id="personalPasswordsSection" class="info-section">

    <h2><i class="fas fa-lock"></i> SENHAS PESSOAIS E LOGINS</h2>

    <button class="toggle-button" id="togglePersonalPasswordsButton">Mostrar/Esconder Senhas</button>

    <button class="clear-button" id="clearPersonalPasswordsButton">LIMPAR SENHAS</button>

    <button class="copy-all-button" id="copyPersonalPasswordsButton">COPIAR TUDO</button> <!-- Novo bot√£o "Copiar Tudo" -->

    <textarea id="personalPasswordsContent" class="info-content" placeholder="Registre suas senhas e logins pessoais aqui..."></textarea>

  </div>

  <!-- Fim da Nova Se√ß√£o de Senhas Pessoais e Logins -->



  <div id="historySection" class="info-section">

    <h2><i class="fas fa-history"></i> Hist√≥rico de Registros <span id="totalCopiesCounter" class="history-counter">0</span></h2>

    <input type="text" id="historySearchInput" class="search-input" placeholder="Pesquisar no hist√≥rico...">

    <button class="toggle-button" id="toggleHistoryButton">Mostrar/Esconder Hist√≥rico</button>

    <button class="clear-button" id="clearHistoryButton">LIMPAR HIST√ìRICO</button>

    <div id="historyContent" class="info-content"></div> <!-- Alterado de <pre> para <div> -->

  </div>



  <div id="manualLookupSection" class="info-section">

    <h2><i class="fas fa-hammer"></i> Guia de Motivos, Subtipos e Deriva√ß√µes</h2>

    <input type="text" id="manualLookupSearchInput" class="search-input" placeholder="Pesquisar no guia...">

    <button class="toggle-button" id="toggleManualLookupButton">Mostrar/Esconder Guia</button>

    <div id="manualLookupContent" class="info-content"></div> <!-- Alterado de <pre> para <div> -->

  </div>



  <div id="additionalInfoSection" class="info-section">

    <h2><i class="fas fa-info-circle"></i> Informa√ß√µes Adicionais e Contatos</h2>

    <input type="text" id="additionalInfoSearchInput" class="search-input" placeholder="Pesquisar nas informa√ß√µes adicionais...">

    <button class="toggle-button" id="toggleAdditionalInfoButton">Mostrar/Esconder Informa√ß√µes</button>

    <div id="additionalInfoContent" class="info-content">

      <h2>CONTATOS POR EMPRESA</h2>

      <h3>CELPE</h3>

      <p>WHATSAPP: (81)3217-6990<br>

      OUVIDORIA: 0800-285-5599<br>

      GRUPOA: 0800-281-2236<br>

      MICROGERA√á√ÉO: 0800-031-1866<br>

      RECLAMA√á√ÉO: 0800-024-2244</p>

      <hr>

      <h3>COELBA</h3>

      <p>WHATSAPP: (71)3370-6350<br>

      OUVIDORIA: 0800-071-7676<br>

      GRUPOA: 0800-284-8080<br>

      MICROGERA√á√ÉO: 0800-071-5509<br>

      RECLAMA√á√ÉO: 0800-276-0116</p>

      <hr>

      <h3>COSERN</h3>

      <p>WHATSAPP: (84)3215-6001<br>

      OUVIDORIA: 0800-084-0404<br>

      GRUPOA: 0800-084-0808<br>

      MICROGERA√á√ÉO: 0800-084-5010<br>

      RECLAMA√á√ÉO: 0800-283-0800</p>

      <hr>

      <h3>ELEKTRO</h3>

      <p>WHATSAPP: (19)2122-1696<br>

      OUVIDORIA: 0800-012-4050<br>

      GRUPOA: 0800-701-0103<br>

      MICROGERA√á√ÉO: 0800-020-1200<br>

      RECLAMA√á√ÉO: 0800-701-0102</p>

      <hr>

      <h3>BRASILIA</h3>

      <p>0800 061 0196.<br>

      WHATSAPP: (61)3465-9318<br>

      OUVIDORIA: 0800-644-6116<br>

      GRUPOA:<br>

      MICROGERA√á√ÉO: 0800-222-2502<br>

      RECLAMA√á√ÉO:</p>

      <hr>

      <p><strong>EQUATORIAL MARANH√ÉO</strong>: 0800 091 0196</p>

      <hr class="double-line">



      <h2>OUTROS CONTATOS IMPORTANTES</h2>

      <h3>CAC ENEL SAO PAULO</h3>

      <p>0800 72 72 120</p>

      <hr>

      <h3>CONTATO ANEEL</h3>

      <p>167</p>

      <hr>

      <h3>CREFAZ</h3>

      <p>0800 052 5052<br>

      VERIFICAR PARCELAS: 0800 052 5051<br>

      whatsapp: (44)3013-9749</p>

      <hr class="double-line">



      <h2>AG√äNCIAS:</h2>

      <h3>COELBA:</h3>

      <p>CREDENCIADA: <a href="https://www.neoenergia.com/documents/d/bahia/enderecos-credenciadas-neoenergia-coelba-020524-pdf" target="_blank">https://www.neoenergia.com/documents/d/bahia/enderecos-credenciadas-neoenergia-coelba-020524-pdf</a><br>

      LOJA: <a href="https://www.neoenergia.com/web/bahia/sua-casa/canais-de-atendimento" target="_blank">https://www.neoenergia.com/web/bahia/sua-casa/canais-de-atendimento</a><br>

      TENSAO: <a href="https://www.neoenergia.com/documents/d/bahia/tensao-fornecimento-nclb-300425" target="_blank">https://www.neoenergia.com/documents/d/bahia/tensao-fornecimento-nclb-300425</a></p>

      <hr>

      <h3>CELP (PERNAMBUCO):</h3>

      <p><a href="https://www.neoenergia.com/documents/d/pernambuco/nper-lojas-1-pdf" target="_blank">https://www.neoenergia.com/documents/d/pernambuco/nper-lojas-1-pdf</a></p>

      <hr>

      <h3>COSERN:</h3>

      <p><a href="https://www.neoenergia.com/documents/d/rn/enderecos-lojas-de-atendimento-neoenergia-cosern-311024-pdf" target="_blank">https://www.neoenergia.com/documents/d/rn/enderecos-lojas-de-atendimento-neoenergia-cosern-311024-pdf</a><br>

      LOJAS: <a href="https://www.neoenergia.com/web/rn/sua-casa/canais-de-atendimento" target="_blank">https://www.neoenergia.com/web/rn/sua-casa/canais-de-atendimento</a></p>

      <hr>

      <h3>ELEKTRO:</h3>

      <p><a href="https://www.neoenergia.com/documents/d/sp/enderecos-atendimento-presencial_site-1-pdf" target="_blank">https://www.neoenergia.com/documents/d/sp/enderecos-atendimento-presencial_site-1-pdf</a></p>

      <hr class="double-line">



      <h2>COMERCIAIS:</h2>

      <h3>COELBA:</h3>

      <p><a href="http://webclientcoelba.neoenergia.net/sap/bc/b/sap/crm_ic/" target="_blank">http://webclientcoelba.neoenergia.net/sap/bc/b/sap/crm_ic/</a></p>

      <hr>

      <h3>CELP:</h3>

      <p><a href="http://webclientcelpe.neoenergia.net/sap/bc/b/sap/crm_ic/" target="_blank">http://webclientcelpe.neoenergia.net/sap/bc/b/sap/crm_ic/</a></p>

      <hr>

      <h3>COSERN:</h3>

      <p><a href="http://webclientcosern.neoenergia.net/sap/bc/b/sap/crm_ic/" target="_blank">http://webclientcosern.neoenergia.net/sap/bc/b/sap/crm_ic/</a></p>

      <hr>

      <h3>ELEKTRO:</h3>

      <p><a href="http://ueappsc.elektro.com.br/elektro.html" target="_blank">http://ueappsc.elektro.com.br/elektro.html</a></p>

      <hr class="double-line">



      <h2>PARCELAMENTO:</h2>

      <h3>COELBA:</h3>

      <p><a href="https://neoenergiacoelba.negocieonline.com.br/callcenter" target="_blank">https://neoenergiacoelba.negocieonline.com.br/callcenter</a><br>

      Login: usuario@callcenter.com.br<br>

      Senha: Callcenter@2023</p>

      <hr class="double-line">



      <h2>ENVIO DE FATURAS:</h2>

      <h3>GMAIL:</h3>

      <p>@gmail.com<br>

      @outlook.com<br>

      @yahoo.com<br>

      @live.com<br>

      @terra.com<br>

      @hotmail.com</p>

      <hr>

      <h3>SMS:</h3>

      <p>@sms.fat.com (elektro)<br>

      @sms.fat (senhas por gmail s√£o os 5 primeiros digitos do cpf ou 5 ultimos)</p>

      <p>(55+DD+N¬∞ DO TELEFONE+@sms.fat.com)</p>

      <hr>

      <h3>WHATSAPP:</h3>

      <p>@faturadigital.whatsapp</p>

      <p>(55+DDD+N¬∞ DO TELEFONE+@faturadigital.whatsapp.com)</p>

      <hr class="double-line">



      <h2>MULTILOGIN: (ACESSO AO MULTILOGIN √â O SEU UE DA ELEKTRO COMO SENHA E LOGIN )</h2>

      <h3>COSERN:</h3>

      <p><a href="https://multilogin-cosern.neoenergia.net/#/login" target="_blank">https://multilogin-cosern.neoenergia.net/#/login</a></p>

      <hr>

      <h3>COELBA:</h3>

      <p><a href="https://multilogin-coelba.neoenergia.net/#/login" target="_blank">https://multilogin-coelba.neoenergia.net/#/login</a></p>

      <hr>

      <h3>CELP/PERNAMBUCO:</h3>

      <p><a href="https://multilogin-pernambuco.neoenergia.net/#/login" target="_blank">https://multilogin-pernambuco.neoenergia.net/#/login</a></p>

      <hr class="double-line">



      <h2>DENUNCIA:</h2>

      <p>TELEFONE: 0800 591 0857<br>

      E-MAIL: neoenergia@canaldedenuncia.com.br<br>

      SITE: <a href="https://www.canalparadenuncia.com.br/neoenergia" target="_blank">www.canalparadenuncia.com.br/neoenergia</a> ou o site da concession√°ria referente ao cliente.</p>

      <hr class="double-line">



      <h2>LINKS √öTEIS E SISTEMAS:</h2>

      <p>RESET DE SENHA: <a href="https://docs.google.com/forms/d/e/1FAIpQLSceWf4ci9sJW13tYf4B3xg2FdzhsutHaT6RZ7wXusrOpG-N5w/viewform" target="_blank">https://docs.google.com/forms/d/e/1FAIpQLSceWf4ci9sJW13tYf4B3xg2FdzhsutHaT6RZ7wXusrOpG-N5w/viewform</a><br>

      COMPLICE OUVIDORIA: <a href="https://aec.becompliance.com/canal-etica/canal-denuncias" target="_blank">https://aec.becompliance.com/canal-etica/canal-denuncias</a><br>

      LINK FACILITA: <a href="https://ceres/FacilitaNeoenergiav2/Guia/Campanha/" target="_blank">https://ceres/FacilitaNeoenergiav2/Guia/Campanha/</a><br>

      LINK CFY: <a href="https://quality.cyf.com/feedbackLogin.php" target="_blank">https://quality.cyf.com/feedbackLogin.php</a><br>

      LINK H.E RELATORIA: <a href="https://paladio/PortalRelatorios/LoginManual.aspx" target="_blank">https://paladio/PortalRelatorios/LoginManual.aspx</a><br>

      LINK NICE: <a href="https://ttvnice-prod4.grupoaec.com.br/pt_BR/group/webstation/home" target="_blank">https://ttvnice-prod4.grupoaec.com.br/pt_BR/group/webstation/home</a><br>

      PORTAL DO CONHECIMENTO: <a href="https://digital-wpress-neoenergia.grupoaec.com.br/wp-login.php?redirect_to=https%3A%2F%2Fdigital-wpress-neoenergia.grupoaec.com.br%2F" target="_blank">https://digital-wpress-neoenergia.grupoaec.com.br/wp-login.php?redirect_to=https%3A%2F%2Fdigital-wpress-neoenergia.grupoaec.com.br%2F</a><br>

      ROBBYSOM: <a href="https://login.microsoftonline.com/8106d8af-7489-49c4-a814-f495064fde59/saml2?SAMLRequest=nZNNb9pAEIb%2FirV3f1GDzQoTUVBVpLRF4PaQSzSsx8lK9q67O07Iv%2B9icMShcOBkaead2ZnnHc8eDk3tvaGxUqucxUHEHuYzC03d8kVHr2qLfzu05DmZsrxP5Kwzimuw0nIFDVpOgu8WPx75KIh4azRpoWvmrVc5exapiAR8SSeRyBKoYJxlI%2Bb9GR50FU5obYdrZQkUuVA0Svw48uO4iFM%2Bjvg4CbI0fWLe5tz6q1SlVC%2B359ifRJZ%2FL4qNv%2Fm1K5i3sBYNuYeXWtmuQbND8yYF%2Ft4%2B5uyVqLU8DAFFYPR%2B%2F2G1CoRuQnAcUJEUQMi8laMhFVA%2F%2FlBT6xepgkYKo62uSKtaKuyLszialBlUfppkUz%2BZisSHLE78KpmOo0lSlTiehkesI3biznsa5gL47T1h2InNr27QIEEJBLPw4oXB5p%2Bu5Xq10bUUH%2FfY%2FE2bBui6Og7iPiJLv%2BqlvFO2RSEriaXzpK71%2B9Kgg5szMh2ycJjsfHtY9pfoPCM83HWJS920YKQ9WoYHEDSwvmy8rB3KLVb3kL8pE1wcW7vwxn3etSmPh4zCLVYYcCy0obMz%2F5tnfspdwfGZvfxb5%2F8A&RelayState=operacao&sso_reload=true" target="_blank">https://login.microsoftonline.com/8106d8af-7489-49c4-a814-f495064fde59/saml2?SAMLRequest=nZNNb9pAEIb%2FirV3f1GDzQoTUVBVpLRF4PaQSzSsx8lK9q67O07Iv%2B9icMShcOBkaead2ZnnHc8eDk3tvaGxUqucxUHEHuYzC03d8kVHr2qLfzu05DmZsrxP5Kwzimuw0nIFDVpOgu8WPx75KIh4azRpoWvmrVc5exapiAR8SSeRyBKoYJxlI%2Bb9GR50FU5obYdrZQkUuVA0Svw48uO4iFM%2Bjvg4CbI0fWLe5tz6q1SlVC%2B359ifRJZ%2FL4qNv%2Fm1K5i3sBYNuYeXWtmuQbND8yYF%2Ft4%2B5uyVqLU8DAFFYPR%2B%2F2G1CoRuQnAcUJEUQMi8laMhFVA%2F%2FlBT6xepgkYKo62uSKtaKuyLszialBlUfppkUz%2BZisSHLE78KpmOo0lSlTiehkesI3biznsa5gL47T1h2InNr27QIEEJBLPw4oXB5p%2Bu5Xq10bUUH%2FfY%2FE2bBui6Og7iPiJLv%2BqlvFO2RSEriaXzpK71%2B9Kgg5szMh2ycJjsfHtY9pfoPCM83HWJS920YKQ9WoYHEDSwvmy8rB3KLVb3kL8pE1wcW7vwxn3etSmPh4zCLVYYcCy0obMz%2F5tnfspdwfGZvfxb5%2F8A&RelayState=operacao&sso_reload=true</a><br>

      PORTAL PESSOAL: <a href="https://pegasus/Portal_Pessoal/Acesso/Login?returnUrl=%2FPortal_P" target="_blank">https://pegasus/Portal_Pessoal/Acesso/Login?returnUrl=%2FPortal_P</a><br>

      google: <a href="https://www.google.com/" target="_blank">https://www.google.com/</a><br>

      RECEITA FEDERAL: <a href="https://servicos.receita.fazenda.gov.br/Servicos/CPF/ConsultaSituacao/ConsultaPublica.asp" target="_blank">https://servicos.receita.fazenda.gov.br/Servicos/CPF/ConsultaSituacao/ConsultaPublica.asp</a><br>

      RECEITA CNPJ: <a href="https://consultacnpj.com/" target="_blank">https://consultacnpj.com/</a><br>

      SALES-FORCE: <a href="https://neoenergia2021.lightning.force.com/lightning/page/home" target="_blank">https://neoenergia2021.lightning.force.com/lightning/page/home</a><br>

      GOGLE LIVROS: <a href="https://books.google.com.br/" target="_blank">https://books.google.com.br/</a></p>

      <hr class="double-line">



      <h2>LUGARES QUE ATENDEM ILUMINA√á√ÉO PUBLICA:</h2>

      <h3>ILUMINA√á√ÉO P√öBLICA CIDADES (CELPE):</h3>

      <ul>

        <li>PANELAS</li>

        <li>SANTA CRUZ DO CAPIBARIBE</li>

        <li>AGRESTINA</li>

        <li>GRAVAT√Å</li>

        <li>SERRA TALHADA</li>

      </ul>

      <h3>ILUMINA√á√ÉO P√öBLICA CIDADES (ELEKTRO):</h3>

      <ul>

        <li>CAJATI -REDENCAO DA SERRA</li>

        <li>PARIQUERA - AURIFLAMA</li>

        <li>A√á√ö -IRACEMAPOLIS</li>

        <li>ILHA COMPRIDA -EUCLIDES DA CUNHA</li>

        <li>ARARAS -ITAPEVA</li>

        <li>PEDRO DE TOLEDO</li>

      </ul>

      <hr class="double-line">



      <h2>TABELA PARA C√ÅLCULO DA CCIP:</h2>

      <p>nova<br>

      Consumo de at√© 100KWH por m√™s ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. 1,00% da TCIP<br>

      Consumo de 101 a 200KWH por m√™s ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ 4,00% da TCIP<br>

      Consumo de 201 a 300KWH por m√™s ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ 6,00% da TCIP<br>

      Consumo de 301 a 500KWH por m√™s ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶8,00% da TCIP<br>

      Consumo de mais de 500KWH por m√™s ‚Ä¶‚Ä¶‚Ä¶10,00% da TCIP<br>

      Im√≥vel sem medidor de consumo de energia por ano‚Ä¶. 60,00% da TCIP</p>

      <hr class="double-line">



      <h2>ARTIGOS REGULAT√ìRIOS:</h2>

      <p><strong>Art.73</strong> Que √© uma autua√ß√£o sobre uso indevido de carga ou liga√ß√£o direta.</p>

      <p><strong>Art. 111</strong> √© a leitura por media por causa de calamidade regulamentada por √≥rg√£o competente junto a Aneel (tipo pandemia)</p>

      <p><strong>Art. 113</strong> √© por causa de faturamento de valores incorretos</p>

      <p><strong>Art.115</strong> trata de um consumo q ocorreu e n√£o foi registrado por defeito do medidor ou procedimento que impediu medi√ß√£o<br>

      correta (que no caso gera aquele parcelamento autom√°ticamente para cobran√ßa)</p>

      <p>Em hist√≥rico de consumo e leitura (sap) ou quadro resumo (ue) nos deparamos com essas anota√ß√µes.<br>

      <strong>IMPORTANT√çSSIMO</strong> Essas informa√ß√µes devem ser repassadas com muita cautela,</p>

      <p>acima foram resumidas apenas para uma compreens√£o superficial do que se trata,<br>

      mas que os dota de conhecimento suficiente para informa√ß√£o do cliente.</p>

      <p>Se atenderem um cliente com o caso do art 73 n√£o seja imprudente dizendo ao cliente: Ahhh Senhor isso √© por causa de um gato!<br>

      Voc√™ pode falar por exemplo: Senhor o art 73 fala sobre irregularidades no uso da energia,<br>

      uma nota da inspe√ß√£o com mais detalhes, ou foi entregue ao Senhor no ato,<br>

      ou enviado para seus meios de comunica√ß√£o cadastrados nessa unidade.</p>

      <p>Percebem a diferen√ßa de abordagem? Lembrem-se tamb√©m, p√≥s argumenta√ß√µes por sua parte,<br>

      se o cliente quiser reclamar ou contestar √© um direito tbm previsto em resolu√ß√£o que ele possui,<br>

      ent√£o valide com seu supervisor a transfer√™ncia para CEC, tabulando o caso com as informa√ß√µes do caso antes de transferir.</p>

      <hr class="double-line">



      <h2>CLIENTES DE MICRO GERA√á√ÉO (CONTATO DE RECLAMA√á√ÉO):</h2>

      <p>Celpe - <a href="mailto:clientescorporativoscelpe@neoenergia.com">clientescorporativoscelpe@neoenergia.com</a><br>

      Coelba - <a href="mailto:captacaodeclientes.coelba@neoenergia.com">captacaodeclientes.coelba@neoenergia.com</a><br>

      Cosern - <a href="mailto:grandesclientes.cosern@neoenergia.com">grandesclientes.cosern@neoenergia.com</a><br>

      Elektro - <a href="mailto:atendimento.personalizado@elektro.com.br">atendimento.personalizado@elektro.com.br</a></p>

      <hr class="double-line">



      <h2>RESSARCIMENTO DE DANOS:</h2>

      <p>RELATO DO OCORRIDO:<br>

      DATA E HORARIO DO INICIO DO OCORRIDO:<br>

      DATA E HORARIO DO FINAL DO OCORRIDO:<br>

      REFERENCIA:<br>

      TELEFONE PARA CONTATO:<br>

      EMAIL DE CONTATO:<br>

      MEIO DE COMUNICA√á√ÉO ESCOLHIDO:<br>

      LISTA DE EQUIPAMENTOS DANIFICADOS: MARCA- MODELO- TEMPO- USO<br>

      HOUVE CONSERTO:</p>

      <hr class="double-line">



      <h2>BAIXA RENDA:</h2>

      <h3>MOTIVOS POR N√ÉO TER REALIZADO:</h3>

      <ul>

        <li>Inconsist√™ncias cadastrais no Cadastro √önico ou na composi√ß√£o familiar;</li>

        <li>Cadastro √∫nico n√£o atualizado;</li>

        <li>Renda maior que a permitida;</li>

        <li>Benef√≠cio da assist√™ncia social sem direito;</li>

        <li>Recebimento do benef√≠cio em mais de uma unidade consumidora;</li>

        <li>N√£o localizada a inscri√ß√£o nos cadastros do governo federal;</li>

        <li>Exclus√£o dos cadastros do governo federal.</li>

      </ul>

      <p>-> 0 a 30kw: 65% de desconto;<br>

      -> 31 a 100kw: 40% de desconto;<br>

      -> 101 a 220kw: 10% de desconto;<br>

      -> acima de 220kw: n√£o h√° desconto aplicado</p>

      <hr class="double-line">



      <h2>LIGA√á√ÉO NOVA:</h2>

      <p>MONO: 1K - 10K<br>

      BI: 12K-25K<br>

      TRI: 26K-75K</p>

      <h3>Neoenergia Coelba (Procedimento exclusivo)</h3>

      <p>Entre no link abaixo, filtre a cidade e preencha o espa√ßo do medidor com:<br>

      Y quando a tens√£o √© predominante 127<br>

      x quando a tens√£o √© predominante 220<br>

      <a href="https://www.neoenergia.com/web/bahia/sua-casa/tensao-de-fornecimento" target="_blank">https://www.neoenergia.com/web/bahia/sua-casa/tensao-de-fornecimento</a></p>

      <hr>

      <h3>Neoenergia Pernambuco</h3>

      <p>Caso ele solicite liga√ß√£o monof√°sica deixar em branco o local medidor<br>

      caso ele solicite trif√°sico se preencher√° com o preenchimento com o ‚ÄúX‚Äù</p>

      <hr>

      <h3>Neoenergia Cosern</h3>

      <p>sejam monof√°sicas ou trif√°sicas preencha com um ‚ÄúX‚Äù no campo medidor.</p>

      <hr class="double-line">



      <h2>ATENDIMENTO PARA DEFICIENTES VISUAIS:</h2>

      <p>COELBA: 0800 281 0142<br>

      CELP: 0800 281 0142<br>

      COSERN: 0800 281 0142<br>

      ELEKTRO: 0800 701 0155<br>

      BRASILIA: 0800 701 0155</p>

      <hr class="double-line">



      <h2>PRAZOS:</h2>

      <p>TELEGRAVA√á√ÉO: S√ÉO 5 DIAS UTEIS<br>

      RECLAMA√á√ÉO: 5 DIAS UTEIS SEM A VISITA E 10 DIAS SE NECESSARIO PRECISAR DA VISITA TECNICA<br>

      SERASA: AO EFETUAR O PAGAMENTO S√ÉO EM TONRO 15 DIAS UTEIS PRA SAIR DO SERASA, CONTENDO 12 DIAS PRA SAIR DO SERASA<br>

      E 3 DO SISTEMA</p>

      <hr class="double-line">



      <h2>COMO CALCULAR O VALOR DA FATURA DOS APARELHOS:</h2>

      <p>Para calcular o consumo de energia em kWh de qualquer equipamento el√©trico,<br>

      basta multiplicar a sua pot√™ncia em Watt (W)<br>

      pelo tempo de uso em horas (h) e dividir o resultado por 1.000.</p>

      <p>Exemplo: um aparelho de som de 300W, ligado por 5 horas, ir√° consumir 1.500W, equivalente a 1,5 kWh.</p>

      <p>Depois, √© s√≥ multiplicar esse consumo di√°rio pelos dias do m√™s para calcular o consumo el√©trico mensal do equipamento.<br>

      Ou seja, em 30 dias, o aparelho de som consumiu 45 kWh.</p>

      <hr>

      <h2>TARIFAS:</h2>

      <p>O valor cobrado mensalmente pelo seu consumo de energia √© calculado pela tarifa de energia vigente da sua distribuidora,<br>

      que pode ter o acr√©scimo das bandeiras tarif√°rias, mais os impostos e encargos que voc√™ paga.</p>

      <p>J√° os impostos s√£o os tributos definidos pelo governo, como Imposto sobre Circula√ß√£o de Mercadorias e Servi√ßos (ICMS),<br>

      Programa de Integra√ß√£o Social (PIS) e Contribui√ß√£o para o Financiamento da Seguridade Social (Cofins).</p>

      <hr>

      <h2>C√ÅLCULO DE KWH:</h2>

      <p>Se a tarifa da distribuidora da sua regi√£o for de, por exemplo, R$ 0,80 pelo kWh e voc√™ consumir 100 kWh,<br>

      voc√™ pagar√° R$ 80 por esse consumo. Tamb√©m a t√≠tulo de exemplo,<br>

      vamos considerar que o valor dos impostos √© de R$ 0,20 por kWh.<br>

      Nesse caso, o total dos impostos da sua conta seria de R$ 20</p>

      <p>Fazendo a soma da tarifa + impostos, o valor final cobrado na sua conta mensal de energia seria de R$ 100.</p>

      <hr>

      <h2>ILUMINA√á√ÉO P√öBLICA (C√°lculo):</h2>

      <p>Por√©m, isso n√£o √© tudo! O consumidor ainda precisa pagar um valor correspondente √† contribui√ß√£o para a ilumina√ß√£o p√∫blica,<br>

      que varia de acordo com o munic√≠pio.</p>

      <p>Vamos utilizar um exemplo para voc√™ entender melhor: digamos que o valor total da sua conta foi de R$ 100<br>

      (j√° com a tarifa, impostos e bandeira vigente) e voc√™ mora em um resid√™ncia na cidade de S√£o Paulo</p>

      <p>Como, nessa cidade, o valor da contribui√ß√£o para ilumina√ß√£o p√∫blica √© de R$ 9,66 para esse tipo de im√≥vel,<br>

      o valor total da sua conta mensal seria de R$ 109,66.</p>

      <hr>

      <h2>TAXAS DA ILUMINA√á√ÉO P√öBLICA:</h2>

      <p>4,00% (quatro por cento) do contribuinte cujo im√≥vel dispender de 101 a 200 KWh por m√™s;<br>

      5,50% (cinco e meio por cento) do contribuinte cujo im√≥vel dispender de 201 a 300 KWh por m√™s;<br>

      7,00% (sete por cento) do contribuinte cujo im√≥vel dispender acima de 301 KWh por m√™s.</p>

      <p>(INFORMA√á√ïES DO SITE: <a href="https://www.portalsolar.com.br/como-calcular-o-consumo-de-energia-em-kwh" target="_blank">https://www.portalsolar.com.br/como-calcular-o-consumo-de-energia-em-kwh</a>)</p>

      <hr class="double-line">



      <h2>FOP FPL 9 GERAR NUMERA√á√ÉO DE BARRAS PELO DEBITO AUTOMATICO NA NORDESTE EM 10 PASSOS:</h2>

      <p>Quando voc√™ tenta enviar para o cliente a fatura no debito automatico, geralmente vai aparecer dois erros:</p>

      <ul>

        <li>Ficar tudo em branco e n√£o confimar a segunda via</li>

        <li>Acesso n√£o autorizado...</li>

      </ul>

      <p>Nesses casos: vai no fop FPL9=</p>

      <ol>

        <li>vai colocar o " Cta.contrato " e apertar enter.</li>

        <li>vai clicar no nome "VENCIMENTO" 1 vez.</li>

        <li>la em cima vai clicar em "PROCURAR".</li>

        <li>colocar a data do vencimento das faturas sem os pontos. EX: 11.11.2023 = 11112023. E confimar (‚úî).</li>

        <li>vai em "MENU" mas em baixo selecionar "AMBIENTE" e em frente "GERAR FORMULARIO DE PAGAMENTO"</li>

        <li>na nova aba voce vai clicar na pasta do lado dos " < > " e selecionar "PAR√ÇMENTROS IMPRESS√ÉO"</li>

        <li>No fop "Formul.aplica√ß√£o" vai clicar no " ZCFI_CA_FATURA_SD " e confirma (‚úî)</li>

        <li>No fop "Dispositivo de sa√≠da" vai clicar pra procurar e na nova aba clicar no (‚úî)<br>

        em baixo que vai aparecer varias op√ß√µes √© so clica no " PDFWEB " e confirma (‚úî)</li>

        <li>Apos isso confirma, na seta ao lado do Dispositivo de sa√≠da que aparecer outra aba, apos isso<br>

        selecionar "Pr√©-visualiza√ß√£o", apos confirma sera redirecionado a aba anterior.</li>

        <li>√â so clicar na pasta do lado do (‚úî) que vai abrir a fatura automatica mandar selecionar para abrir. üòâ</li>

      </ol>

      <hr class="double-line">



      <h2>N√öMERO DA PREFEITURA DE ILUMINA√á√ÉO PUBLICA (PESQUISADO NO GOOGLE)</h2>

      <h3>CELP:</h3>

      <p>JABOATAO DOS GUARARAPES: (81) 99232-5280<br>

      PAULISTA: 0800.000.4279<br>

      ABREU E LIMA: 0800 002 0220<br>

      CARUARU: 0800 666 0080<br>

      CABO DE SANTO AGOSTINHO: 81 99160-5845 ou 3521-6698 e pelo whatsapp 81 98870-4353<br>

      OLINDA: 0800 778 7272<br>

      RECIFE: 156<br>

      BEZERROS Secretaria de Infraestrutura :(81) 3728-6735</p>

      <hr>

      <h3>COELBA:</h3>

      <p>SALVADOR: 156<br>

      CAMACARI: 0800 284 0064<br>

      LAURO DE FREITAS: 080 721 0112</p>

      <hr>

      <h3>ELEKTRO:</h3>

      <p>GERAL: 0800 779 0156 (SAO PAULO 0800175717)<br>

      GUARUJA: 0800 608 1053<br>

      MOGI-GUA√áU: 0800 770 5676<br>

      FERNANDOPOLIS: 0800-772-4550 =WHATSAPP: (17)99728-4550<br>

      PERUIBE 0800-000-0209<br>

      GAST√ÉO VIDIGAL- 0800175717, pode ligar para o 153 e digitar a op√ß√£o 3<br>

      PORTO FERREIRA:0800-777-9541 . WHATSAPP:(19) 9 7145-4586<br>

      TRES LAGOAS WHATSAPP: (67) 2104-0271<br>

      LIMEIRA: 156<br>

      FRANCISCO MORATO: 0800-806-4641.<br>

      Itanha√©m: 0800 806 4641<br>

      ANDRADINA: (18) 99748-7850<br>

      TEODORO SAMPAIO: (18) 3282-1224<br>

      OUROESTE: 0800-190-5000 WHATS:(17)99119-8069<br>

      RIO CLARO: 3526-7127-WHATS:(19) 9 9495-9124-SITE: <a href="http://www.rioclaro.sp.gov.br" target="_blank">www.rioclaro.sp.gov.br</a> .</p>

      <h3>LEME: G-Energy:</h3>

      <p>Telefone: 0800 777 9541<br>

      WhatsApp: (19) 99661-4123 (apenas mensagens)<br>

      Site: <a href="https://www.genergy.com.br/genergy-manutencao.html" target="_blank">www.genergy.com.br/genergy-manutencao.html</a></p>

      <h3>Prefeitura de Leme:</h3>

      <p>Telefone: 3097-1000<br>

      Secretaria de Obras e Planejamento Urbano: Rua Dr. Armando de Sales Oliveira, 1085 ‚Äì 4¬∫ andar</p>

      <h3>Prefeitura de S√£o Jo√£o da Boa Vista:</h3>

      <p>Central: (19) 3634-1000<br>

      Ouvidoria: 0800 7730156</p>

      <hr>

      <h3>COSERN:</h3>

      <p>NATAL: 0800 281 8980<br>

      CEARA MIRIM: (84) 3274-5916 WHATS-(84) 99119-2386<br>

      CAICO: (84) 99118-0037 (tambem serve para whatsapp)<br>

      PARNAMIRIM: 0800-2816400<br>

      SAO GONCALO DO AMARANTE: (84) 3278-3242 ,(84) 99918-9995 /(84) 99621-6999 (WhatsApp).<br>

      MOSSORO: (84) 99655-6965</p>

      <hr class="double-line">

      <p><strong>Imp.Som/Dim-C/Impost:</strong><br>

      Esse termo refere-se a cobran√ßa residual ao trocar o medidor convencional em unidades consumidoras que acabaram de implantar seu sistema de Micro ou Minigera√ß√£o</p>

    </div>

  </div>



  <!-- Nova Se√ß√£o de Personaliza√ß√£o de Cores -->

  <div id="colorCustomizationSection" class="info-section">

    <h2><i class="fas fa-palette"></i> Personaliza√ß√£o de Cores</h2>

    <button class="toggle-button" id="toggleColorCustomizationButton">Mostrar/Esconder Personaliza√ß√£o</button>

    <div id="colorCustomizationContent" class="info-content">

      <p>Altere as cores dos elementos do formul√°rio ao seu gosto. Suas escolhas ser√£o salvas automaticamente.</p>



      <hr class="double-line">

      <div id="themePresets" class="theme-buttons-container">

        <h3>Temas Pr√©-definidos:</h3>

        <div class="theme-buttons">

          <button class="clear-form-button theme-select-button" data-theme="default-dark">Padr√£o Escuro</button>

          <button class="clear-form-button theme-select-button" data-theme="default-light">Padr√£o Claro</button>

          <button class="clear-form-button theme-select-button" data-theme="azul-oceano">Azul Oceano</button>

          <button class="clear-form-button theme-select-button" data-theme="azul-eletrico">Azul El√©trico</button>

          <button class="clear-form-button theme-select-button" data-theme="noite-estrelada">Noite Estrelada</button>

        </div>

        <hr>

      </div>



      <div id="colorPickers" class="color-pickers-container">

        <div class="color-picker-group form-group">

          <label for="bgColorPicker">Cor de Fundo Principal:</label>

          <input type="color" id="bgColorPicker" value="#000000">

        </div>

        <div class="color-picker-group form-group">

          <label for="containerBgColorPicker">Cor de Fundo dos Blocos:</label>

          <input type="color" id="containerBgColorPicker" value="#000000">

        </div>

        <div class="color-picker-group form-group">

          <label for="textColorPicker">Cor do Texto Principal:</label>

          <input type="color" id="textColorPicker" value="#FFFFFF">

        </div>

        <div class="color-picker-group form-group">

          <label for="labelColorPicker">Cor das Labels:</label>

          <input type="color" id="labelColorPicker" value="#EEEEEE">

        </div>

        <div class="color-picker-group form-group">

          <label for="inputBgColorPicker">Fundo dos Campos de Entrada:</label>

          <input type="color" id="inputBgColorPicker" value="#444444">

        </div>

        <div class="color-picker-group form-group">

          <label for="inputTextBorderColorPicker">Borda dos Campos de Entrada:</label>

          <input type="color" id="inputTextBorderColorPicker" value="#555555">

        </div>

        <div class="color-picker-group form-group">

          <label for="inputTextColorPicker">Cor do Texto dos Campos de Entrada:</label>

          <input type="color" id="inputTextColorPicker" value="#FFFFFF">

        </div>

        <div class="color-picker-group form-group">

          <label for="copyBtnBgColorPicker">Fundo do Bot√£o Copiar/Alternar:</label>

          <input type="color" id="copyBtnBgColorPicker" value="#4CAF50">

        </div>

        <div class="color-picker-group form-group">

          <label for="copyBtnTextColorPicker">Cor do Texto do Bot√£o Copiar/Alternar:</label>

          <input type="color" id="copyBtnTextColorPicker" value="#FFFFFF">

        </div>

        <div class="color-picker-group form-group">

          <label for="clearBtnBgColorPicker">Fundo do Bot√£o Limpar:</label>

          <input type="color" id="clearBtnBgColorPicker" value="#e0e0e0">

        </div>

        <div class="color-picker-group form-group">

          <label for="clearBtnTextColorPicker">Cor do Texto do Bot√£o Limpar:</label>

          <input type="color" id="clearBtnTextColorPicker" value="#000000">

        </div>

        <div class="color-picker-group form-group">

          <label for="outputBgColorPicker">Fundo da √Årea de Sa√≠da/Conte√∫do:</label>

          <input type="color" id="outputBgColorPicker" value="#222222">

        </div>

        <div class="color-picker-group form-group">

          <label for="outputTextColorPicker">Cor do Texto da √Årea de Sa√≠da/Conte√∫do:</label>

          <input type="color" id="outputTextColorPicker" value="#FFFFFF">

        </div>

        <div class="color-picker-group form-group">

          <label for="outputBorderColorPicker">Borda da √Årea de Sa√≠da/Conte√∫do:</label>

          <input type="color" id="outputBorderColorPicker" value="#555555">

        </div>

        <hr>

      </div>


      <!-- Controles de Tamanho da Fonte -->
      <div class="customization-option form-group">
        <label class="custom-label">Tamanho do Texto:</label>
        <div class="font-size-controls">
          <button id="decreaseFontSize" class="action-button-mini"><i class="fas fa-minus"></i> Diminuir</button>
          <button id="increaseFontSize" class="action-button-mini"><i class="fas fa-plus"></i> Aumentar</button>
        </div>
      </div>
      <hr>


      <!-- Transparency Slider -->

      <div class="form-group">

        <label for="transparencySlider">Transpar√™ncia dos Campos:</label>

        <input type="range" id="transparencySlider" min="0" max="1" step="0.05" value="0.7">

        <span id="transparencyValue">70%</span>

      </div>

      <hr>



      <div id="backgroundImageControls" class="form-group">

        <h3>Imagem de Fundo (Papel de Parede):</h3>

        <p style="font-size: 0.85em; color: var(--label-color);">Resolu√ß√£o recomendada: 1920x1080 pixels (Full HD) ou superior para melhor qualidade. Evite imagens muito grandes (acima de 5MB) para melhor performance.</p>

        <label for="backgroundImageInput">Selecione uma imagem:</label>

        <input type="file" id="backgroundImageInput" accept="image/*">

        <button class="clear-form-button" id="clearBackgroundImageButton" style="margin-top: 10px;">Limpar Imagem de Fundo</button>

      </div>

      <hr>



      <button class="clear-form-button" id="randomColorsButton">Cores Aleat√≥rias</button>

      <button class="clear-form-button" id="resetColorsButton">Restaurar Padr√£o do Tema</button>

    </div>

  </div>

  <!-- Fim da Se√ß√£o de Personaliza√ß√£o de Cores -->



  <!-- Nova Se√ß√£o: Zona de Recrea√ß√£o -->

  <div id="recreationSection" class="info-section">

    <h2><i class="fas fa-gamepad"></i> Zona de Recrea√ß√£o</h2>

    <button class="toggle-button" id="toggleRecreationButton">Mostrar/Esconder Zona de Recrea√ß√£o</button>

    <div id="recreationContent" class="info-content">

      <div id="gameSelectionButtons">

        <button id="showSnakeButton" data-game="snake">Jogo da Cobrinha</button>

        <button id="showCheckersButton" data-game="checkers">Damas</button>

        <button id="showTicTacToeButton" data-game="ticTacToe">Jogo da Velha</button>

        <button id="showTetrisButton" data-game="tetris">Tetris</button>

      </div>



      <!-- Snake Game Container -->

      <div id="snakeGameContainer" class="game-container" style="display: none;">

        <h3>Jogo da Cobrinha</h3>

        <p id="snakeInstructions" style="font-size: 0.85em; color: var(--label-color);">Use as setas do teclado para mover a cobrinha. Colete a comida para crescer!</p>

        <canvas id="snakeCanvas" width="320" height="320"></canvas>

        <p id="snakeScore">Pontos: 0</p>

        <div id="snakeGameControls">

          <button class="clear-button" id="startGameButton">Iniciar Jogo</button>

          <button class="clear-button" id="resetSnakeGameButton">Zerar Jogo</button>

        </div>

      </div>



      <!-- Damas Game Container -->

      <div id="checkersGameContainer" class="game-container" style="display: none;">

        <h3>Damas</h3>

        <div class="game-mode-selection">

          <label>

            <input type="radio" name="checkersMode" value="player-vs-player" checked> Jogador vs Jogador

          </label>

          <label>

            <input type="radio" name="checkersMode" value="player-vs-ai"> Jogador vs IA

          </label>

        </div>
        <!-- Difficulty selection for Checkers -->
        <div class="game-difficulty-selection" id="checkersDifficultySelection" style="display: none;">
          <label>
            <input type="radio" name="checkersDifficulty" value="easy" checked> F√°cil
          </label>
          <label>
            <input type="radio" name="checkersDifficulty" value="medium"> M√©dio
          </label>
          <label>
            <input type="radio" name="checkersDifficulty" value="hard"> Dif√≠cil
          </label>
        </div>


        <div id="checkersBoard"></div>

        <p id="checkersStatus">Vez do Vermelho</p>

        <div id="checkersControls">

          <button class="clear-button" id="resetCheckersGameButton">Reiniciar Damas</button>

        </div>

      </div>



      <!-- Tic-Tac-Toe Game Container -->

      <div id="ticTacToeGameContainer" class="game-container" style="display: none;">

        <h3>Jogo da Velha</h3>

        <div class="game-mode-selection">

          <label>

            <input type="radio" name="ticTacToeMode" value="player-vs-player" checked> Jogador vs Jogador

          </label>

          <label>

            <input type="radio" name="ticTacToeMode" value="player-vs-ai"> Jogador vs IA

          </label>

        </div>
        <!-- Difficulty selection for Tic-Tac-Toe -->
        <div class="game-difficulty-selection" id="ticTacToeDifficultySelection" style="display: none;">
          <label>
            <input type="radio" name="ticTacToeDifficulty" value="easy" checked> F√°cil
          </label>
          <label>
            <input type="radio" name="ticTacToeDifficulty" value="medium"> M√©dio
          </label>
          <label>
            <input type="radio" name="ticTacToeDifficulty" value="hard"> Dif√≠cil
          </label>
        </div>

        <div id="ticTacToeBoard"></div>

        <p id="ticTacToeStatus">Vez do Jogador X</p>

        <div id="ticTacToeControls">

          <button class="clear-button" id="resetTicTacToeGameButton">Reiniciar Jogo da Velha</button>

        </div>

      </div>



      <!-- Tetris Game Container -->

      <div id="tetrisGameContainer" class="game-container" style="display: none;">

        <h3>Tetris</h3>

        <p id="tetrisInstructions" style="font-size: 0.85em; color: var(--label-color);">Use as setas para mover (esquerda/direita) e girar (cima). Seta para baixo para queda suave. Espa√ßo para queda r√°pida.</p>

        <div style="display: flex; justify-content: center; align-items: flex-start; gap: 20px;">

          <canvas id="tetrisGameCanvas" width="200" height="400"></canvas>

          <div style="display: flex; flex-direction: column; align-items: center;">

            <p style="margin-bottom: 5px;">Pr√≥xima Pe√ßa:</p>

            <canvas id="tetrisNextPieceCanvas" width="100" height="100"></canvas>

            <div id="tetrisGameInfo">

              <p>Pontos: <span id="tetrisScore">0</span></p>

              <p>Linhas: <span id="tetrisLines">0</span></p>

              <p>N√≠vel: <span id="tetrisLevel">1</span></p>

            </div>

          </div>

        </div>

        <div id="tetrisGameControls">

          <button class="clear-button" id="startTetrisButton">Iniciar Jogo</button>

          <button class="clear-button" id="resetTetrisButton">Reiniciar Tetris</button>

          <button class="clear-button" id="pauseTetrisButton">Pausar Jogo</button>

        </div>

      </div>

    </div>

  </div>

  <!-- Fim da Nova Se√ß√£o: Zona de Recrea√ß√£o -->





  <!-- Estrutura do Modal Personalizado -->

  <div id="customAlertModal" class="custom-modal-overlay" style="display: none;">

    <div class="custom-modal">

      <p id="customAlertMessage"></p>

      <div class="modal-buttons">

        <button onclick="hideCustomAlert()">OK</button>

      </div>

    </div>

  </div>



  <div id="customConfirmModal" class="custom-modal-overlay" style="display: none;">

    <div class="custom-modal">

      <p id="customConfirmMessage"></p>

      <div class="modal-buttons">

        <button id="confirmYesButton">Sim</button>

        <button id="confirmNoButton" class="cancel">N√£o</button>

      </div>

    </div>

  </div>



  <!-- Mensagem de Feedback de C√≥pia -->

  <div id="appFeedback"></div> <!-- Renamed for generic use -->



  <script>

    // Objeto de dados para os motivos, subtipos e deriva√ß√µes

    const motivosData = {

      "UNIDADE": {

        "INFORMA√á√ïES": "cliente entra em contato solicitando informa√ß√µes sobre sua unidade consumidora. verificado em sistema repassado de acordo."

      },

      "DATA BOA": {

        "VENCIMENTO": "cliente entra em contato para solicitar a troca da data de faturamento. sondado todos os dados, modificado com sucesso."

      },

      "VERBALIZAR CODIGO DE BARRAS": {

        "CODIGO DE BARRAS": "cliente deseja que o agente verbalize c√≥digo de barras da fatura do m√™s __. Conforme todos os dados, verbalizado de acordo."

      },

      "ENVIO DE SEGUNDA VIA": {

        "ENVIADO": "cliente solicita envio das faturas em aberto. Sondado todos os dados, enviado de acordo.",

        "NAO ENVIADO": "cliente solicita envio das faturas em aberto. Sondado todos os dados, n√£o enviado pois n√£o era o titular/confirmou todos os dados.",

        "BOLETO": "cliente solicita envio dos boleto em aberto. Sondado todos os dados, recomendo aguardar."

      },

      "REATIVA√á√ÉO": {

        "FEITO": "cliente entra em contato solicitando reativa√ß√£o de sua unidade consumidora. Sondado todos os dados, realizado de acordo",

        "NAO ERA O TITULAR": "cliente entra em contato solicitando reativa√ß√£o de sua unidade consumidora. Sondado todos os dados, n√£o realizado pois n√£o era o titular.",

        "DEBITOS": "cliente entra em contato solicitando reativa√ß√£o de sua unidade consumidora. Sondado todos os dados, n√£o realizado pois continha d√©bitos.",

        "REATIVA√á√ÉO COM TROCA": "Cliente deseja reativa√ß√£o com troca de titularidade, √© informado de acordo que s√≥ na loja f√≠sica ou site",

        "CNPJ": "Cliente solicita reativa√ß√£o, mas √© um CNPJ, servi√ßo n√£o realizado."

      },

      "INFORMA√á√ïES": { 

        "TROCA DE TITULARIDADE": "cliente entra em contato solicitando informa√ß√µes sobre troca de titularidade, repassado as informa√ß√µes, informado utilizar tanto pelos canais digitais, e recomendado em casos espec√≠ficos s√≥ na loja f√≠sica.",

        "PARCELAMENTO INFO": "Cliente entra em contato para saber informa√ß√µes sobre parcelamento, foi sugerido o link do parcelamento ao mesmo, no qual foi enviado por SMS.",

        "DEBITOS": "cliente entra em contato solicitando informa√ß√µes sobre seus d√©bitos. Sondado todos os dados, verificado em sistema, repassado as informa√ß√µes de acordo.",

        "LIGA√á√ÉO NOVA": "cliente entra em contato solicitando informa√ß√µes de liga√ß√£o nova, verificado em sistema, repassado de acordo."

      },

      "FATURA POR GMAIL": {

        "CADASTRADO": "Cliente solicita cadastro de fatura por email. Sondando todos os dados, cadastrado de acordo.",

        "DESCADASTRO": "cliente solicita descadastro de fatura por gmail, sondado todos os dados, procedimento feito de acordo.",

        "NAO ERA O TITULAR": "Cliente solicita cadastro de fatura por email. N√£o foi realizado pois n√£o era o titular/ n√£o confirmou todos os dados.",

        "APLICATIVO": "cliente est√° tentando entrar no novo aplicativo, e pede para resetar a senha, mas n√£o est√° recebendo totem por gmail."

      },

      "OSCILA√á√ÉO": {

        "GERAL": "cliente entra em contato informa que tanto a sua resid√™ncia como a vizinhan√ßa consta com oscila√ß√£o de energia. Nota gerada de acordo",

        "INDIVIDUAL": "cliente entra em contato informando que a sua resid√™ncia consta com oscila√ß√£o de energia, verificado os scripts, nota gerada de acordo."

      },

      "ATUALIZA√á√ÉO CADASTRAL": {

        "ATUALIZADO": "Cliente entra em contato solicitando atualiza√ß√£o cadastral. Sondado todos os dados, modificado de acordo"

      },

      "CARGA": {

        "REALIZADO": "cliente solicita altera√ß√£o de carga para ____. Sondado todos os dados, realizado de acordo.",

        "DEBITO EM ATRASO": "cliente solicita altera√ß√£o de carga. N√£o realizado pois continha d√©bitos em aberto."

      },

      "FALTA DE ENERGIA": {

        "GERAL": "falta de energia geral desde √†s 11h sem motivos aparentes.",

        "INDIVIDUAL": "Cliente informa falta de energia somente em sua unidade desde √†s ___ sem motivos aparentes. J√° foi realizado verifica√ß√£o dos scripts. Nota gerada de acordo.",

        "NOTA J√Å GERADA": "Cliente informa falta de energia, por√©m, j√° continha nota gerada anteriormente em sistema. Informado, repassado a previs√£o e orientado a aguardar.",

        "INTERNO": "Cliente informa falta de energia somente em sua unidade, por√©m era problema interno, nota n√£o gerada.",

        "SUSPENSA": "Cliente informa falta de energia somente em sua unidade, por√©m est√° suspensa.",

        "PREVIS√ÉO": "Cliente deseja informa√ß√£o de falta de energia. Informado, repassado a previs√£o e orientado a aguardar."

      },

      "FALTA DE FASE": {

        "GERAL": "Cliente informa falta de fase geral desde √†s ___ sem motivos aparentes. J√° foi realizado a verifica√ß√£o dos scripts. Nota gerada de acordo.",

        "INDIVIDUAL": "falta de fase, j√° solicitou um eletricista particular, o mesmo informa que √© externo.",

        "NOTA EM ABERTO": "Cliente informa fase por√©m, j√° continha nota gerada anteriormente em sistema. Informado, repassado a previs√£o e orientado a aguardar."

      },

      "RISCOS A VIDA !!!!!": {

        "CONDUTOR PARTIDO/ INCENDIO": "cliente informa que h√° um ___ na sua localidade. √â orientado a n√£o se aproximar e se poss√≠vel isolar a √°rea. Nota gerada e repassada para supervisor para priorizar."

      },

      "PODA DE ARVORE": {

        "REALIZADO": "Cliente entra em contato para informar que pr√≥ximo a sua unidade h√° uma √°rvore que precisa ser podada, pois est√° pr√≥xima dos condutores de energia, nota gerada de acordo",

        "PREFEITURA": "Cliente entra em contato para informar que pr√≥ximo a sua unidade h√° uma √°rvore que precisa ser podada, pois est√° pr√≥xima dos condutores de energia. Foi informado a mesma que √© necess√°rio entrar em contato com a prefeitura de seu munic√≠pio para que eles possam abrir o chamado."

      },

      "BAIXA RENDA": {

        "CADASTRO TARIFA SOCIAL ": { 

          "REALIZADO": "Cliente deseja que seja inclu√≠do o n√∫mero do NIS em sua unidade para receber o desconto do baixa renda. Feito de acordo.",

          "INFORMA√á√ÉO SOBRE TARIFA SOCIAL:": "Cliente entra em contato para saber se j√° tem o baixa renda inclu√≠do em seu cadastro. Foi informado a mesma que a partir das pr√≥ximas faturas seus d√©bitos vir√£o com a tarifa social inclu√≠dos na mesma"

        }

      },

      "ACOMPANHAMENTO DE NOTA": {

        "INFORMA√á√ïES NOTA NORMAL": "Cliente solicita informa√ß√µes sobre o andamento da sua nota de ___. Foi informado, repassado o prazo e orientado a aguardar.",

        "EM ATRASO": "Cliente solicita informa√ß√µes sobre o andamento da sua nota de ___. Foi verificado em sistema que sua nota estaria em atraso por cerca de ___. Transferido com valida√ß√£o.",

        "REALIZADA": "Cliente solicita informa√ß√µes sobre o andamento da sua nota de ___. Foi verificado e informado que a nota j√° teria sido atendida. Orientado a verificar se a informa√ß√£o de sistema procede.",

        "RETIDA": "Cliente solicita informa√ß√µes sobre o andamento da sua nota de ___. Foi informado que a nota de momento estaria RETIDA. O mesmo informa que os problemas j√° foram contornados. Nota reliberada de acordo.",

        "VISITADO E NAO REALIZADO": "Cliente solicita informa√ß√µes sobre o andamento da sua nota de ___. Foi informado que sua nota de momento estaria VNRE e o mesmo teria que realizar o pedido novamente."

      },

      "CANCELAR NOTA": {

        "FALTA DE ENERGIA": "cliente entra em contato afirmando que anteriormente solicitou uma falta de energia por√©m retornou a liga√ß√£o afirmando que o problema seria interno e deseja cancelar a DEMANDA",

        "CANCELAR NOTA": "cliente entra em contato solicitando o cancelamento da nota ___, sondado os dados realizado de acordo",

        "SERVI√áO DE TERCEIROS": "cliente entra em contato para cancelar o servi√ßo ___. Sondado os dados realizado de acordo"

      },

      "RELIGA√á√ÉO": {

        "GERADO": "cliente deseja religa√ß√£o de sua unidade. O mesmo informa que pagou as faturas e tem os comprovantes em m√£os. Nota gerada de acordo.",

        "N√ÉO FEITA": "Cliente solicita religa√ß√£o da unidade, por√©m, n√£o foi efetuado o pagamento de todos os d√©bitos que est√£o em atraso. Foi orientado a realizar os pagamentos e ap√≥s isso solicitar novamente a religa√ß√£o.",

        "NOTA J√Å EM SISTEMA": "Cliente solicita religa√ß√£o, por√©m, j√° havia nota aberta em sistema. Foi orientado a aguardar o prazo do servi√ßo."

      },

      "AUTO LEITURA": {

        "REALIZADO": "Cliente entra em contato para passar auto-leitura. Foi informado a mesma o consumo em KW e a mesma desejou registrar.",

        "FORA DE DATA DE FATURAMENTO": "Cliente entra em contato para passar auto-leitura, por√©m j√° passou do prazo devido para informar a leitura. Procedimento n√£o efetuado. Foi informado e orientado de acordo pois ser√° faturado por m√©dia."

      },

      "LIGA√á√ÉO NOVA": {

        "REALIZADO": "Cliente solicita liga√ß√£o nova ___ em seu endere√ßo com ___ de carga com data boa para dia: ___. Liga√ß√£o nova realizada de acordo, mediante a confirma√ß√£o de todos os dados necess√°rios.",

        "DEBITOS": "Cliente solicita liga√ß√£o nova de uma unidade consumidora. N√£o foi solicitado pois continha d√©bitos.",

        "SEM DADOS": "Cliente solicita liga√ß√£o nova, por√©m, o mesmo n√£o soube informar a tens√£o do fornecimento que ser√° utilizado e nem a carga que ser√° declarada. Informado e orientado para que realize a solicita√ß√£o novamente com todos os dados necess√°rios.",

        "SEM CADASTRO": "cliente solicita liga√ß√£o nova, por√©m n√£o tem v√≠nculo. Recomendado a utilizar os canais de acordo.",

        "NAO ERA O TITULAR": "cliente solicita liga√ß√£o nova de terceiros, por√©m o titular n√£o estava pr√≥ximo. Orientado de acordo a ser o titular em linha",

        "CNPJ": "Cliente solicita liga√ß√£o nova em um CNPJ, recomendado de acordo com s√≥ pessoa f√≠sica ou caso contr√°rio presencial."

      },

      "TROCA DE PADR√ÉO": {

        "REALIZADO": "cliente entra em contato solicitando troca de padr√£o, sondado todos os dados, realizado de acordo",

        "DEBITO EM ATRASO": "cliente deseja troca de padr√£o mas consta com pend√™ncias em aberto, servi√ßo n√£o realizado."

      },

      "TROCA DE TITULARIDADE": {

        "REALIZADO": "Cliente solicita troca de titularidade de uma unidade consumidora para seu nome. Foi realizado a confirma√ß√£o de todos os dados necess√°rios para o servi√ßo e foi efetuada a troca.",

        "NAO E O TITULAR": "Cliente solicita troca de titularidade de uma unidade consumidora para o nome de outra pessoa. N√£o foi realizado pois n√£o era o novo titular",

        "NAO TEM OS DADOS": "Cliente solicita troca de titularidade de uma unidade consumidora para seu nome. N√£o foi realizado devido porque o cliente n√£o confirmou todos os dados.",

        "CNPJ": "cliente solicita troca de titularidade CNPJ para pessoa f√≠sica, recomendado de acordo a ir na loja f√≠sica ou canais digitais",

        "SEM CADASTRO": "Cliente solicita troca de titularidade de uma unidade consumidora para seu nome. N√£o foi realizado devido a nova titular n√£o ter cadastro em seu CPF. Informado e orientado de acordo.",

        "D√âBITOS NA UNIDADE": "Cliente solicita troca de titularidade da unidade para seu nome, por√©m, havia d√©bitos na unidade e n√£o foi realizado o servi√ßo. Informado e orientado de acordo.",

        "SUSPENSA": "Cliente solicita troca de titularidade da unidade para seu nome, por√©m o im√≥vel consta suspensa.",

        "D√âBITOS NO CPF": "Cliente solicita troca de titularidade da unidade para seu nome, por√©m, havia d√©bitos no CPF do novo titular e n√£o foi realizado o servi√ßo. Informado e orientado de acordo.",

        "FATURAMENTO": "solicita√ß√£o de troca de titularidade, n√£o efetuado pois est√° em faturamento",

        "DESLIGAMENTO": "cliente solicita troca de titularidade mas a unidade tem uma nota de desligamento definitivo em aberto. Orientado de acordo",

        "NOTA JA EM ANDAMENTO": "cliente solicita troca de titularidade, mas j√° consta em andamento."

      },

      "DESLIGAMENTO DEFINITIVO": {

        "REALIZADO": "Cliente solicita que seja realizado o encerramento de contrato/desligamento definitivo. Sondado todos os dados, realizado de acordo",

        "SEM TITULAR": "Cliente solicita que seja realizado o encerramento de contrato/desligamento definitivo. N√£o foi realizado pois o mesmo que estava em linha n√£o seria o titular da conta.",

        "DEBITO": "Cliente solicita que seja realizado o encerramento de contrato/desligamento definitivo. N√£o realizado pois est√° em faturamento",

        "CNPJ": "Cliente solicita que seja realizado o encerramento de contrato/desligamento definitivo. N√£o realizado pois era pessoa jur√≠dica",

        "FATURAMENTO": "Cliente solicita que seja realizado o encerramento de contrato/desligamento definitivo. N√£o realizado pois est√° em per√≠odo de faturamento."

      },

      "PARCELAMENTO": {

        "REALIZADO": "Cliente solicita o parcelamento de seus d√©bitos em aberto na sua unidade com entrada de ___ com __ parcelas de __. Foi realizado a confirma√ß√£o de todos os dados necess√°rios e o mesmo seria o titular em linha.",

        "SEM TITULAR": "cliente solicita parcelar suas d√≠vidas, n√£o foi realizado pois n√£o era o titular e n√£o confirmou todos os dados.",

        "CREDITO": "cliente solicita parcelar suas d√≠vidas, por√©m n√£o foi realizado, pois no sistema s√≥ constava cart√£o de cr√©dito.",

        "EXTRAVIO": "cliente n√£o recebeu a primeira entrada do parcelamento, dia previsto ___. Repassado as informa√ß√µes para o setor respons√°vel para ter o seu retorno.",

        "CNPJ": "cliente solicita parcelar suas d√≠vidas, por√©m n√£o foi realizado, pois era CNPJ"

      },

      "ILUMINA√á√ÉO PUBLICA": {

        "REALIZADO": "Cliente solicita servi√ßo de ilumina√ß√£o p√∫blica, nota gerada de acordo.",

        "PREFEITURA": "Cliente solicita servi√ßo de ilumina√ß√£o p√∫blica, foi verificado no sistema que a cidade n√£o tem liminar e foi informado √† cliente para entrar em contato com a prefeitura.",

        "NOTA JA EM ANDAMENTO": "Cliente solicita servi√ßo de ilumina√ß√£o p√∫blica, foi verificado no sistema que j√° existia uma solicita√ß√£o em aberto, orientado a aguardar o prazo estimado."

      },

      "RESET DE SENHA": {

        "REALIZADO": "Cliente entra em contato para informar que n√£o est√° conseguindo acessar o site, o mesmo solicita um reset de senha para que possa realizar o procedimento (script de seguran√ßa confirmado).",

        "NAO ERA O TITULAR": "cliente deseja reset de senha, n√£o realizado pois n√£o era o titular."

      },

      "CONTESTAR VALOR DE FATURAS": {

        "FATURA ESTA CORRETA": "Cliente entra em contato para informar que suas contas est√£o vindo num valor mais alto que o normal para uma unidade que n√£o est√° consumindo tanta energia. Informado a mesma que de acordo com seu hist√≥rico de consumo e leitura dos √∫ltimos 12 meses, n√£o h√° nenhum erro por parte do leiturista e a fatura est√° devida.",

        "VALOR ERRADO": "cliente entra em contato para contestar o valor da sua fatura, verificado em sistema a leitura ____ atual mostra como recorrente, por√©m o consumo veio abaixo do m√™s anterior e o valor consta muito alto. Verificado os scripts, transferido com valida√ß√£o.",

        "TRANSFERIDO PARA SPEC": "Cliente informa que sua fatura est√° vindo com um valor alto, orientado de acordo, o mesmo n√£o aceita, transferido de acordo."

      },

      "FATURA EM DUPLICIDADE": {

        "ORIENTADO DE ACORDO": "Cliente entra em contato para informar que pagou uma fatura em duplicidade. Foi informado ao mesmo que pode aguardar que ser√° descontado na pr√≥xima fatura, ou ir at√© uma ag√™ncia f√≠sica para solicitar um reembolso."

      },

      "ESPEC": {

        "GERAL": "cliente entra em contato para solicitar informa√ß√µes sobre seus d√©bitos, por√©m a mesma informa que o consumo est√° muito alto, foi verificado em sistema que a leitura atual mostra ____, e se encontra normal e recorrente, por√©m a mesma deseja reclamar e solicita uma vistoria. Transferido de acordo e com valida√ß√£o.",

        "RESSARCIMENTO DE DANOS": "Cliente deseja solicitar um ressarcimento de danos, foi confirmado com o cliente a marca, o modelo, tempo de uso, se houve conserto anteriormente e a data e hor√°rio aproximado que teve a falta de energia. Foi confirmado os dados pessoais e transferido para o setor respons√°vel.",

        "COBRAN√áAS": "cliente relata que est√£o vindo cobran√ßas para ela de faturas j√° pagas, a mesma afirma que tem o comprovante em m√£os. Sondado os dados transferido de acordo."

      },

      "FALTA DE COMUNICA√á√ÉO": {

        "LIGA√á√ÉO MUDA": "Cliente entra em contato sobre ____, por√©m, sua liga√ß√£o fica completamente muda. Foi realizado o retorno, por√©m, sem sucesso.",

        "BAIXO CAL√ÉO": "cliente relata____, por√©m come√ßou a falar palavras de baixo cal√£o, como de acordo, por falta de comunica√ß√£o foi encerrado o atendimento."

      }

    };



    // Global array to store history items

    let historyRecords = [];

    // Global variable for total copies counter
    let totalCopies = 0;



    // Elementos do DOM

    const empresaSelect = document.getElementById('empresa');

    const nomeInput = document.getElementById('nome');

    const ucCpfInput = document.getElementById('ucCpf');

    const telefoneInput = document.getElementById('telefone');

    const motivoSelect = document.getElementById('motivo');

    const subtipoSelect = document.getElementById('subtipo');

    const derivacaoSelect = document.getElementById('derivacao');

    const subtipoDerivacaoContainer = document.getElementById('subtipoDerivacaoContainer');

    const derivacaoFormGroup = document.getElementById('derivacaoFormGroup');

    const referenciaInput = document.getElementById('referencia');

    const observacoesTextarea = document.getElementById('observacoes');

    const copyButton = document.getElementById('copyButton');

    const outputContent = document.getElementById('outputContent');

    const clearFormButton = document.getElementById('clearFormButton');



    // Novo elemento para o toggle do formul√°rio

    const toggleFormButton = document.getElementById('toggleFormButton');

    const formContent = document.getElementById('formContent');



    // Novos elementos para as se√ß√µes de informa√ß√£o

    const toggleNotepadButton = document.getElementById('toggleNotepadButton');

    const notepadContent = document.getElementById('notepadContent');

    const clearNotepadButton = document.getElementById('clearNotepadButton');

    const copyNotepadButton = document.getElementById('copyNotepadButton');



    const togglePersonalPasswordsButton = document.getElementById('togglePersonalPasswordsButton');

    const personalPasswordsContent = document.getElementById('personalPasswordsContent');

    const clearPersonalPasswordsButton = document.getElementById('clearPersonalPasswordsButton');

    const copyPersonalPasswordsButton = document.getElementById('copyPersonalPasswordsButton');



    const toggleHistoryButton = document.getElementById('toggleHistoryButton');

    const historyContent = document.getElementById('historyContent');

    const historySearchInput = document.getElementById('historySearchInput');

    const clearHistoryButton = document.getElementById('clearHistoryButton');

    const totalCopiesCounter = document.getElementById('totalCopiesCounter'); // Get reference to the new counter span



    const toggleManualLookupButton = document.getElementById('toggleManualLookupButton');

    const manualLookupContent = document.getElementById('manualLookupContent');

    const manualLookupSearchInput = document.getElementById('manualLookupSearchInput');



    const toggleAdditionalInfoButton = document.getElementById('toggleAdditionalInfoButton');

    const additionalInfoContent = document.getElementById('additionalInfoContent');

    const additionalInfoSearchInput = document.getElementById('additionalInfoSearchInput');



    const toggleColorCustomizationButton = document.getElementById('toggleColorCustomizationButton');

    const colorCustomizationContent = document.getElementById('colorCustomizationContent');



    // Nova se√ß√£o de recrea√ß√£o

    const toggleRecreationButton = document.getElementById('toggleRecreationButton');

    const recreationContent = document.getElementById('recreationContent');

    const gameSelectionButtons = document.getElementById('gameSelectionButtons');

    const showSnakeButton = document.getElementById('showSnakeButton');

    const showCheckersButton = document.getElementById('showCheckersButton');

    const showTicTacToeButton = document.getElementById('showTicTacToeButton');

    const showTetrisButton = document.getElementById('showTetrisButton');



    const snakeGameContainer = document.getElementById('snakeGameContainer');

    const checkersGameContainer = document.getElementById('checkersGameContainer');

    const ticTacToeGameContainer = document.getElementById('ticTacToeGameContainer');

    const tetrisGameContainer = document.getElementById('tetrisGameContainer');



    const appFeedback = document.getElementById('appFeedback');



    // Custom Modal elements

    const customAlertModal = document.getElementById('customAlertModal');

    const customAlertMessage = document.getElementById('customAlertMessage');

    const customConfirmModal = document.getElementById('customConfirmModal');

    const customConfirmMessage = document.getElementById('customConfirmMessage');

    const confirmYesButton = document.getElementById('confirmYesButton');

    const confirmNoButton = document.getElementById('confirmNoButton');

    let confirmCallback = null;



    let originalAdditionalInfoContentHTML = ''; 



    // Color Customization Elements

    const customColorPickers = {

      '--main-bg-color': document.getElementById('bgColorPicker'),

      '--container-bg-color': document.getElementById('containerBgColorPicker'),

      '--main-text-color': document.getElementById('textColorPicker'),

      '--label-color': document.getElementById('labelColorPicker'),

      '--input-bg-color': document.getElementById('inputBgColorPicker'),

      '--input-border-color': document.getElementById('inputTextBorderColorPicker'),

      '--input-text-color': document.getElementById('inputTextColorPicker'),

      '--copy-button-bg': document.getElementById('copyBtnBgColorPicker'),

      '--copy-button-text': document.getElementById('copyBtnTextColorPicker'),

      '--clear-button-bg': document.getElementById('clearBtnBgColorPicker'),

      '--clear-button-text': document.getElementById('clearBtnTextColorPicker'),

      '--output-bg-color': document.getElementById('outputBgColorPicker'),

      '--output-text-color': document.getElementById('outputTextColorPicker'),

      '--output-border-color': document.getElementById('outputBorderColorPicker')

    };

    const resetColorsButton = document.getElementById('resetColorsButton');

    const randomColorsButton = document.getElementById('randomColorsButton');



    // Elements for hiding/showing theme related controls

    const themePresetsContainer = document.getElementById('themePresets');

    const colorPickersContainer = document.getElementById('colorPickers');



    // Transparency Slider Elements

    const transparencySlider = document.getElementById('transparencySlider');

    const transparencyValue = document.getElementById('transparencyValue');



    // Font Size Controls Elements
    const decreaseFontSizeBtn = document.getElementById('decreaseFontSize');
    const increaseFontSizeBtn = document.getElementById('increaseFontSize');


    // Preset Themes

    const presetThemes = {

      'default-dark': {

        '--main-bg-color': '#000000',

        '--container-bg-color': '#000000',

        '--main-text-color': '#FFFFFF',

        '--label-color': '#EEEEEE',

        '--input-bg-color': '#444444',

        '--input-border-color': '#555555',

        '--input-text-color': '#FFFFFF',

        '--copy-button-bg': '#4CAF50',

        '--copy-button-text': '#FFFFFF',

        '--clear-button-bg': '#e0e0e0',
        '--clear-button-text': '#000000',

        '--secondary-button-bg-color': '#555555',
        '--secondary-button-hover-bg-color': '#777777',
        '--button-text-color': '#FFFFFF',

        '--output-bg-color': '#222222',

        '--output-text-color': '#FFFFFF',

        '--output-border-color': '#555555',

        'isLightMode': false

      },

      'default-light': {

        '--main-bg-color': '#f0f0f0',

        '--container-bg-color': '#FFFFFF',

        '--main-text-color': '#333333',

        '--label-color': '#555555',

        '--input-bg-color': '#f8f8f8',

        '--input-border-color': '#cccccc',

        '--input-text-color': '#333333',

        '--copy-button-bg': '#4CAF50',

        '--copy-button-text': '#FFFFFF',

        '--clear-button-bg': '#cccccc',
        '--clear-button-text': '#333333',

        '--secondary-button-bg-color': '#AAAAAA',
        '--secondary-button-hover-bg-color': '#BBBBBB',
        '--button-text-color': '#333333',

        '--output-bg-color': '#f9f9f9',

        '--output-text-color': '#333333',

        '--output-border-color': '#dddddd',

        'isLightMode': true

      },

      'azul-oceano': {

        '--main-bg-color': '#0A192F',

        '--container-bg-color': '#172A45',

        '--main-text-color': '#E6F1FF',

        '--label-color': '#69B3FF',

        '--input-bg-color': '#0D274E',

        '--input-border-color': '#365D8F',

        '--input-text-color': '#D3E7FF',

        '--copy-button-bg': '#00BFFF',

        '--copy-button-text': '#FFFFFF',

        '--clear-button-bg': '#87CEFA',
        '--clear-button-text': '#000000',

        '--secondary-button-bg-color': '#365D8F',
        '--secondary-button-hover-bg-color': '#4A7BBF',
        '--button-text-color': '#FFFFFF',

        '--output-bg-color': '#0F2038',

        '--output-text-color': '#E6F1FF',

        '--output-border-color': '#365D8F',

        'isLightMode': false

      },

      'azul-eletrico': {

        '--main-bg-color': '#1A1A2E',

        '--container-bg-color': '#2A094E',

        '--main-text-color': '#E0FFFF',

        '--label-color': '#00FFFF',

        '--input-bg-color': '#0F3460',

        '--input-border-color': '#007BFF',

        '--input-text-color': '#E0FFFF',

        '--copy-button-bg': '#00BFFF',

        '--copy-button-text': '#FFFFFF',

        '--clear-button-bg': '#87CEEB',
        '--clear-button-text': '#001F3F',

        '--secondary-button-bg-color': '#0F3460',
        '--secondary-button-hover-bg-color': '#1A4F8C',
        '--button-text-color': '#E0FFFF',

        '--output-bg-color': '#162447',

        '--output-text-color': '#E0FFFF',

        '--output-border-color': '#007BFF',

        'isLightMode': false

      },

      'noite-estrelada': {

        '--main-bg-color': '#000033',

        '--container-bg-color': '#0A0A5C',

        '--main-text-color': '#E6E6FA', /* Lavender */

        '--label-color': '#CCCCFF', /* Light Steel Blue */

        '--input-bg-color': '#191970', /* Midnight Blue */

        '--input-border-color': '#4169E1', /* Royal Blue */

        '--input-text-color': '#E6E6FA',

        '--copy-button-bg': '#FFD700', /* Gold */

        '--copy-button-text': '#000033',

        '--clear-button-bg': '#ADD8E6', /* Light Blue */
        '--clear-button-text': '#000033',

        '--secondary-button-bg-color': '#191970',
        '--secondary-button-hover-bg-color': '#2A2AA0',
        '--button-text-color': '#E6E6FA',

        '--output-bg-color': '#0F0F80',

        '--output-text-color': '#E6E6FA',

        '--output-border-color': '#4169E1',

        'isLightMode': false

      }

    };



    // New DOM elements for background image

    const backgroundImageInput = document.getElementById('backgroundImageInput');

    const clearBackgroundImageButton = document.getElementById('clearBackgroundImageButton');





    // Function to show custom alert modal

    function showCustomAlert(message) {

      customAlertMessage.textContent = message;

      customAlertModal.style.display = 'flex';

    }



    // Function to hide custom alert modal

    function hideCustomAlert() {

      customAlertModal.style.display = 'none';

    }



    // Function to show custom confirmation modal

    function showCustomConfirm(message, callback) {

      customConfirmMessage.textContent = message;

      confirmCallback = callback;

      customConfirmModal.style.display = 'flex';

    }



    // Functions to handle confirmation/cancellation of the modal

    confirmYesButton.onclick = () => {

      if (confirmCallback) {

        confirmCallback(true);

      }

      customConfirmModal.style.display = 'none';

    };



    confirmNoButton.onclick = () => {

      if (confirmCallback) {

        confirmCallback(false);

      }

      customConfirmModal.style.display = 'none';

    };



    // Function to show generic app feedback message

    function showAppFeedback(message) {

      appFeedback.textContent = message;

      appFeedback.style.opacity = 1;

      setTimeout(() => {

        appFeedback.style.opacity = 0;

      }, 1500);

    }



    // Fun√ß√µes para popular os selects

    function populateMotivos() {

      motivoSelect.innerHTML = '<option value="">Selecione o motivo</option>';

      for (const motivoKey in motivosData) {

        const option = document.createElement('option');

        option.value = motivoKey;

        option.textContent = motivoKey;

        motivoSelect.appendChild(option);

      }

      populateSubtipos(''); 

      generateOutput();

    }



    function populateSubtipos(motivo) {

      subtipoSelect.innerHTML = '<option value="">Selecione o subtipo</option>';

      derivacaoSelect.innerHTML = '<option value="">Selecione a deriva√ß√£o</option>';

      subtipoDerivacaoContainer.style.display = 'none';

      derivacaoFormGroup.style.display = 'none';



      if (motivo && motivosData[motivo]) {

        const subtipos = motivosData[motivo];



        if (typeof subtipos === 'object' && subtipos !== null && !Array.isArray(subtipos)) {

          const subtipoKeys = Object.keys(subtipos);



          if (subtipoKeys.length > 0) {

            subtipoDerivacaoContainer.style.display = 'block';



            for (const subKey of subtipoKeys) {

              const option = document.createElement('option');

              option.value = subKey;

              option.textContent = subKey;

              subtipoSelect.appendChild(option);

            }



            if (subtipoKeys.length === 1 && typeof subtipos[subtipoKeys[0]] === 'object') {

              subtipoSelect.value = subtipoKeys[0];

              populateDerivacoes(motivo, subtipoKeys[0]);

            } else {

              populateDerivacoes(motivo, subtipoSelect.value);

            }

          }

        }

      }

    }



    function populateDerivacoes(motivo, subtipo) {

      derivacaoSelect.innerHTML = '<option value="">Selecione a deriva√ß√£o</option>';

      derivacaoFormGroup.style.display = 'none';



      if (motivo && subtipo && motivosData[motivo] && motivosData[motivo][subtipo]) {

        const derivacoes = motivosData[motivo][subtipo]; 



        if (typeof derivacoes === 'object' && derivacoes !== null && !Array.isArray(derivacoes)) {

          const derivacaoKeys = Object.keys(derivacoes);

          if (derivacaoKeys.length > 0) {

            derivacaoFormGroup.style.display = 'block';

            for (const derKey of derivacaoKeys) {

              const option = document.createElement('option');

              option.value = derKey;

              option.textContent = derKey;

              derivacaoSelect.appendChild(option);

            }



            if (derivacaoKeys.length === 1) {

              derivacaoSelect.value = derivacaoKeys[0];

            }

          }

        }

      }

    }



    // Fun√ß√£o para formatar UC/CPF - REMOVIDA para permitir espa√ßos e caracteres especiais

    // function formatUcOrCpf(value) {

    //   return value.replace(/\D/g, '');

    // }



    // Fun√ß√£o para gerar o conte√∫do formatado

    function generateOutput() {

      const empresa = empresaSelect.value;

      const nome = nomeInput.value.toUpperCase();

      const ucCpf = ucCpfInput.value; 

      const telefone = telefoneInput.value;

      const motivo = motivoSelect.value;

      const subtipo = subtipoSelect.value;

      const derivacao = derivacaoSelect.value;

      const observacoes = observacoesTextarea.value;



      let output = `EMPRESA: ${empresa}\n`;

      output += `NOME: ${nome}\n`;

      output += `UC/CPF: ${ucCpf}\n`;

      output += `TELEFONE: ${telefone}\n`;



      let motivoDescription = '';

      if (motivo && motivosData[motivo]) {

        const currentMotivoData = motivosData[motivo];



        if (typeof currentMotivoData === 'string') {

          motivoDescription = currentMotivoData;

        } else {

          if (subtipo && currentMotivoData[subtipo]) {

            const currentSubtipoData = currentMotivoData[subtipo];



            if (typeof currentSubtipoData === 'string') {

              motivoDescription = currentSubtipoData;

            } else {

              if (derivacao && currentSubtipoData[derivacao]) {

                motivoDescription = currentSubtipoData[derivacao];

              } else {

                motivoDescription = `Selecione uma deriva√ß√£o para "${subtipo}".`;

              }

            }

          } else if (Object.keys(currentMotivoData).length > 0) {

            motivoDescription = `Selecione um subtipo para "${motivo}".`;

          } else {

             motivoDescription = `Detalhe do motivo "${motivo}" n√£o encontrado ou incompleto.`;

          }

        }

      } else {

        motivoDescription = "Motivo n√£o selecionado.";

      }



      output += `MOTIVO: ${motivoDescription}\n`;

      output += `REFERENCIA: ${referenciaInput.value}\n`;

      output += `PROTOCOLO: ${observacoes}\n`;



      outputContent.value = output;

    }



    // Function to escape special characters for regex

    function escapeRegExp(string) {

      return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

    }



    // Function to apply highlighting to text

    function applyHighlight(text, searchTerm) {

      if (!searchTerm) return text;

      const escapedSearchTerm = escapeRegExp(searchTerm);

      const regex = new RegExp(`(${escapedSearchTerm})`, 'gi');

      return text.replace(regex, '<span class="highlight">$1</span>');

    }



    // Saves history to localStorage

    function saveHistory() {

      localStorage.setItem('callHistory', JSON.stringify(historyRecords));

    }



    // Loads history from localStorage

    function loadHistory() {

      const savedHistory = localStorage.getItem('callHistory');

      if (savedHistory) {

        historyRecords = JSON.parse(savedHistory);

      }

      const savedTotalCopies = localStorage.getItem('totalCopies');

      if (savedTotalCopies) {

        totalCopies = parseInt(savedTotalCopies);

      }

      renderHistory();

      updateTotalCopiesDisplay(); // Update the counter display after loading

    }



    // Function to add to history

    function addToHistory(item) {

      const now = new Date();

      const timestamp = `${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;

      const record = {

        content: item,

        timestamp: timestamp

      };

      historyRecords.unshift(record); // Add to the beginning for newest first

      saveHistory();

      renderHistory();

    }



    // Function to render or re-render the history section

    function renderHistory(filteredRecords = null) {

      historyContent.innerHTML = '';

      const recordsToDisplay = filteredRecords || historyRecords;

      const searchTerm = historySearchInput.value.toLowerCase();



      if (recordsToDisplay.length === 0) {

        historyContent.innerHTML = '<p style="text-align: center; color: var(--label-color);">Nenhum registro no hist√≥rico.</p>';

        return;

      }



      recordsToDisplay.forEach((record, index) => {

        const historyItemDiv = document.createElement('div');

        historyItemDiv.classList.add('history-item');



        // The originalIndex is needed to delete the correct item from the main historyRecords array

        const originalIndex = historyRecords.indexOf(record); 



        // Calculate record number in descending order (newest = highest number)

        const recordNumber = recordsToDisplay.length - index;



        const highlightedContent = applyHighlight(record.content, searchTerm);

        const highlightedTimestamp = applyHighlight(record.timestamp, searchTerm);



        historyItemDiv.innerHTML = `

          <div class="history-item-content">

            <strong>#${recordNumber}</strong><br>

            <small>(${highlightedTimestamp})</small><br>${highlightedContent}

          </div>

          <div class="history-item-actions">

            <button class="history-item-copy-button">Copiar</button>

            <button class="history-item-delete-button" data-original-index="${originalIndex}">Apagar</button>

          </div>

        `;

        historyContent.appendChild(historyItemDiv);



        historyItemDiv.querySelector('.history-item-copy-button').addEventListener('click', () => {

          const textToCopy = record.content;

          copyToClipboard(textToCopy); // This will now increment the totalCopies counter

        });



        historyItemDiv.querySelector('.history-item-delete-button').addEventListener('click', (event) => {

          const indexToDelete = parseInt(event.target.dataset.originalIndex);

          deleteHistoryItem(indexToDelete);

        });

      });

    }



    // Function to delete a specific history item

    function deleteHistoryItem(originalIndex) {

      historyRecords.splice(originalIndex, 1);

      saveHistory();

      filterHistory(); // Re-filter and re-render after deletion

    }



    // Function to update the total copies display

    function updateTotalCopiesDisplay() {

      totalCopiesCounter.textContent = totalCopies;

    }



    // Function to copy to clipboard (now increments totalCopies)

    function copyToClipboard(text) {

      const textarea = document.createElement('textarea');

      textarea.value = text;

      document.body.appendChild(textarea);

      textarea.select();

      document.execCommand('copy');

      document.body.removeChild(textarea);



      totalCopies++; // Increment total copies for any copy operation

      localStorage.setItem('totalCopies', totalCopies); // Save to localStorage

      updateTotalCopiesDisplay(); // Update the display



      showAppFeedback("Copiado!");

    }



    // Event Listeners for form elements

    empresaSelect.addEventListener('change', generateOutput);

    nomeInput.addEventListener('input', generateOutput);

    ucCpfInput.addEventListener('input', () => {

      // ucCpfInput.value = formatUcOrCpf(ucCpfInput.value); // REMOVED to allow spaces

      generateOutput();

    });

    telefoneInput.addEventListener('input', generateOutput);



    motivoSelect.addEventListener('change', () => {

      populateSubtipos(motivoSelect.value);

      generateOutput();

    });

    subtipoSelect.addEventListener('change', () => {

      populateDerivacoes(motivoSelect.value, subtipoSelect.value);

      generateOutput();

    });

    derivacaoSelect.addEventListener('change', generateOutput);

    referenciaInput.addEventListener('input', generateOutput);

    observacoesTextarea.addEventListener('input', generateOutput);



    copyButton.addEventListener('click', () => {

      if (outputContent.value.trim() === '') {

        showCustomAlert('N√£o h√° conte√∫do para copiar. Por favor, preencha os campos.');

        return;

      }

      copyToClipboard(outputContent.value);

      addToHistory(outputContent.value);

    });



    clearFormButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja limpar todos os campos do formul√°rio?', (result) => {

        if (result) {

          empresaSelect.value = '';

          nomeInput.value = '';

          ucCpfInput.value = '';

          telefoneInput.value = '';

          motivoSelect.value = '';

          subtipoSelect.innerHTML = '<option value="">Selecione o subtipo</option>';

          derivacaoSelect.innerHTML = '<option value="">Selecione a deriva√ß√£o</option>';

          subtipoDerivacaoContainer.style.display = 'none';

          derivacaoFormGroup.style.display = 'none';

          referenciaInput.value = '';

          observacoesTextarea.value = '';

          outputContent.value = '';

          populateMotivos();

        }

      });

    });



    // Toggle button for the main form

    toggleFormButton.addEventListener('click', () => {

      formContent.style.display = formContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('formVisible', formContent.style.display === 'block');

    });



    // Toggle buttons for sections

    toggleNotepadButton.addEventListener('click', () => {

      notepadContent.style.display = notepadContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('notepadVisible', notepadContent.style.display === 'block');

    });



    copyNotepadButton.addEventListener('click', () => {

      if (notepadContent.value.trim() === '') {

        showCustomAlert('O Bloco de Notas est√° vazio. N√£o h√° conte√∫do para copiar.');

        return;

      }

      copyToClipboard(notepadContent.value);

    });



    togglePersonalPasswordsButton.addEventListener('click', () => {

      personalPasswordsContent.style.display = personalPasswordsContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('personalPasswordsVisible', personalPasswordsContent.style.display === 'block');

    });



    copyPersonalPasswordsButton.addEventListener('click', () => {

      if (personalPasswordsContent.value.trim() === '') {

        showCustomAlert('A se√ß√£o de Senhas Pessoais est√° vazia. N√£o h√° conte√∫do para copiar.');

        return;

      }

      copyToClipboard(personalPasswordsContent.value);

    });



    toggleHistoryButton.addEventListener('click', () => {

      historyContent.style.display = historyContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('historyVisible', historyContent.style.display === 'block');

    });



    toggleManualLookupButton.addEventListener('click', () => {

      manualLookupContent.style.display = manualLookupContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('manualLookupVisible', manualLookupContent.style.display === 'block');

    });



    toggleAdditionalInfoButton.addEventListener('click', () => {

      additionalInfoContent.style.display = additionalInfoContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('additionalInfoVisible', additionalInfoContent.style.display === 'block');

    });



    toggleColorCustomizationButton.addEventListener('click', () => {

      colorCustomizationContent.style.display = colorCustomizationContent.style.display === 'none' ? 'block' : 'none';

      if (colorCustomizationContent.style.display === 'block') {

        updateColorPickersToCurrentTheme();

        const selectedPresetTheme = localStorage.getItem('selectedPresetTheme');

        if (selectedPresetTheme) {

          updateActivePresetButton(selectedPresetTheme);

        } else {

          clearPresetThemeSelection();

        }

      }

      localStorage.setItem('colorCustomizationVisible', colorCustomizationContent.style.display === 'block');

    });



    toggleRecreationButton.addEventListener('click', () => {

      recreationContent.style.display = recreationContent.style.display === 'none' ? 'block' : 'none';

      localStorage.setItem('recreationVisible', recreationContent.style.display === 'block');

    });



    // Clear buttons for sections

    clearNotepadButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja limpar o Bloco de Notas?', (result) => {

        if (result) {

          notepadContent.value = '';

          localStorage.removeItem('notepadContent');

        }

      });

    });



    clearPersonalPasswordsButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja limpar as senhas pessoais e logins?', (result) => {

        if (result) {

          personalPasswordsContent.value = '';

          localStorage.removeItem('personalPasswordsContent');

        }

      });

    });



    clearHistoryButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja limpar todo o hist√≥rico de registros?', (result) => {

        if (result) {

          historyRecords = [];

          saveHistory();

          totalCopies = 0; // Reset total copies when history is cleared

          localStorage.removeItem('totalCopies'); // Remove from localStorage

          renderHistory();

          updateTotalCopiesDisplay(); // Update the counter display

        }

      });

    });



    // Search inputs

    historySearchInput.addEventListener('input', filterHistory);

    manualLookupSearchInput.addEventListener('input', filterManualLookup);

    additionalInfoSearchInput.addEventListener('input', filterAdditionalInfo);



    // Event listener for color pickers

    for (const prop in customColorPickers) {

      customColorPickers[prop].addEventListener('input', () => {

        saveCustomColors();

        applyColorsFromPickers();

      });

    }



    resetColorsButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja restaurar as cores padr√£o do tema atual?', (result) => {

        if (result) {

          resetCustomColors();

        }

      });

    });



    randomColorsButton.addEventListener('click', () => {

      applyRandomColors();

    });



    // Event listeners for preset theme buttons

    document.querySelectorAll('.theme-select-button').forEach(button => {

      button.addEventListener('click', (event) => {

        const themeName = event.target.dataset.theme;

        applyPresetTheme(themeName);

      });

    });



    // Event listener for transparency slider

    transparencySlider.addEventListener('input', (event) => {

      const alpha = parseFloat(event.target.value);

      transparencyValue.textContent = `${Math.round(alpha * 100)}%`;

      document.documentElement.style.setProperty('--field-bg-alpha', alpha);

      localStorage.setItem('fieldBgAlpha', alpha);

    });



    // Handler for image file selection

    backgroundImageInput.addEventListener('change', (event) => {

      const file = event.target.files[0];

      if (file) {

        if (file.size > 5 * 1024 * 1024) {

          showCustomAlert('Aten√ß√£o: A imagem selecionada √© muito grande (maior que 5MB) e pode causar lentid√£o ou problemas de salvamento. Por favor, escolha uma imagem menor.');

          backgroundImageInput.value = ''; 

          return;

        }



        const reader = new FileReader();

        reader.onloadend = () => {

          applyBackgroundImage(reader.result);

        };

        reader.readAsDataURL(file);

      } else {

        applyBackgroundImage(null);

      }

    });



    // Handler for clear background image button

    clearBackgroundImageButton.addEventListener('click', () => {

      showCustomConfirm('Tem certeza que deseja remover a imagem de fundo?', (result) => {

        if (result) {

          applyBackgroundImage(null);

          backgroundImageInput.value = '';

        }

      });

    });



    // Function to load saved content for notepad and personal passwords

    function loadSavedContent() {

      const savedNotepadContent = localStorage.getItem('notepadContent');

      if (savedNotepadContent) {

        notepadContent.value = savedNotepadContent;

      }

      const savedPersonalPasswordsContent = localStorage.getItem('personalPasswordsContent');

      if (savedPersonalPasswordsContent) {

        personalPasswordsContent.value = savedPersonalPasswordsContent;

      }

    }



    // Function to save content for notepad and personal passwords

    function saveContent() {

      localStorage.setItem('notepadContent', notepadContent.value);

      localStorage.setItem('personalPasswordsContent', personalPasswordsContent.value);

    }



    // Add event listeners for input on notepad and personal passwords to save automatically

    notepadContent.addEventListener('input', saveContent);

    personalPasswordsContent.addEventListener('input', saveContent);



    // --- Game Management Logic ---

    let activeGame = localStorage.getItem('activeGame') || 'none'; // 'snake', 'checkers', 'ticTacToe', 'tetris', 'none'



    function showGame(gameId) {

      // Stop all games before showing a new one

      stopAllGames();



      snakeGameContainer.style.display = 'none';

      checkersGameContainer.style.display = 'none';
      document.getElementById('checkersDifficultySelection').style.display = 'none'; // Hide difficulty for checkers by default

      ticTacToeGameContainer.style.display = 'none';
      document.getElementById('ticTacToeDifficultySelection').style.display = 'none'; // Hide difficulty for tic tac toe by default

      tetrisGameContainer.style.display = 'none'; // Hide Tetris initially



      // Remove all 'active-game' classes from game selection buttons

      document.querySelectorAll('#gameSelectionButtons button').forEach(button => {

        button.classList.remove('active-game');

      });



      if (gameId === 'snake') {

        snakeGameContainer.style.display = 'block';

        showSnakeButton.classList.add('active-game');

        initSnakeGame();

      } else if (gameId === 'checkers') {

        checkersGameContainer.style.display = 'block';

        showCheckersButton.classList.add('active-game');
        // Show difficulty if AI mode is selected
        if (document.querySelector('input[name="checkersMode"]:checked').value === 'player-vs-ai') {
          document.getElementById('checkersDifficultySelection').style.display = 'flex';
        }
        initCheckersGame();

      } else if (gameId === 'ticTacToe') {

        ticTacToeGameContainer.style.display = 'block';

        showTicTacToeButton.classList.add('active-game');
        // Show difficulty if AI mode is selected
        if (document.querySelector('input[name="ticTacToeMode"]:checked').value === 'player-vs-ai') {
          document.getElementById('ticTacToeDifficultySelection').style.display = 'flex';
        }
        initTicTacToe();

      } else if (gameId === 'tetris') {

        tetrisGameContainer.style.display = 'block';

        showTetrisButton.classList.add('active-game');

        initTetrisGame(); // Initialize Tetris game

      }

      activeGame = gameId;

      localStorage.setItem('activeGame', activeGame);

    }



    function stopAllGames() {

      // Snake

      isGameRunning = false;

      clearInterval(gameInterval); // Clear snake game interval



      // Tetris

      if (tetrisGameInterval) {

        clearInterval(tetrisGameInterval);

      }

      tetrisIsPaused = true; // Ensure Tetris is paused

      // No need to reset Tetris here, initTetrisGame will do that.

    }





    gameSelectionButtons.addEventListener('click', (event) => {

      if (event.target.tagName === 'BUTTON') {

        showGame(event.target.dataset.game);

      }

    });



    // --- Snake Game Logic ---

    const snakeCanvas = document.getElementById('snakeCanvas');

    const snakeCtx = snakeCanvas.getContext('2d');

    const startGameButton = document.getElementById('startGameButton');

    const resetSnakeGameButton = document.getElementById('resetSnakeGameButton');

    const snakeScoreDisplay = document.getElementById('snakeScore');



    const gridSize = 20;

    let snake = [{x: 10, y: 10}];

    let food = {};

    let dx = 0;

    let dy = 0;

    let score = 0;

    let gameInterval;

    let isGameRunning = false;

    let changingDirection = false; // Prevents rapid direction changes



    function drawSnakePart(snakePart) {

      snakeCtx.fillStyle = 'lightgreen';

      snakeCtx.strokeStyle = 'darkgreen';

      snakeCtx.fillRect(snakePart.x * gridSize, snakePart.y * gridSize, gridSize, gridSize);

      snakeCtx.strokeRect(snakePart.x * gridSize, snakePart.y * gridSize, gridSize, gridSize);

    }



    function drawFood() {

      snakeCtx.fillStyle = 'red';

      snakeCtx.strokeStyle = 'darkred';

      snakeCtx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);

      snakeCtx.strokeRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);

    }



    function clearCanvas() {

      snakeCtx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);

    }



    function advanceSnake() {

      if (!isGameRunning) return;

      const head = {x: snake[0].x + dx, y: snake[0].y + dy};



      // Check for game over conditions

      const hitWall = head.x < 0 || head.x * gridSize >= snakeCanvas.width || head.y < 0 || head.y * gridSize >= snakeCanvas.height;

      const hitSelf = snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y);



      if (hitWall || hitSelf) {

        isGameRunning = false;

        clearInterval(gameInterval);

        showCustomAlert(`Fim de Jogo! Sua pontua√ß√£o: ${score}`);

        return;

      }



      snake.unshift(head); // Add new head

      changingDirection = false; // Reset direction change flag



      const didEatFood = head.x === food.x && head.y === food.y;

      if (didEatFood) {

        score += 10;

        snakeScoreDisplay.textContent = `Pontos: ${score}`;

        generateFood();

        localStorage.setItem('snakeScore', score); // Save score

        localStorage.setItem('snakeFood', JSON.stringify(food)); // Save food position

        localStorage.setItem('snakeBody', JSON.stringify(snake)); // Save snake body

      } else {

        snake.pop(); // Remove tail if no food eaten

      }

    }



    function generateFood() {

      let newFoodX, newFoodY;

      do {

        newFoodX = Math.floor(Math.random() * (snakeCanvas.width / gridSize));

        newFoodY = Math.floor(Math.random() * (snakeCanvas.height / gridSize));

      } while (snake.some(segment => segment.x === newFoodX && segment.y === newFoodY)); // Ensure food is not on snake

      food = {x: newFoodX, y: newFoodY};

    }



    function draw() {

      clearCanvas();

      drawFood();

      snake.forEach(drawSnakePart);

    }



    function mainLoop() {

      if (!isGameRunning) return;

      setTimeout(() => {

        advanceSnake();

        draw();

        mainLoop();

      }, 100);

    }



    function changeDirection(event) {

      // Check if the target is within an input or textarea, if so, allow default behavior

      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.tagName === 'SELECT') {

        return;

      }



      const keyPressed = event.keyCode;

      const LEFT_KEY = 37;

      const UP_KEY = 38;

      const RIGHT_KEY = 39;

      const DOWN_KEY = 40;



      // Prevent default arrow key behavior (page scrolling) if snake game is active and keys are arrow keys

      if (activeGame === 'snake' && [LEFT_KEY, UP_KEY, RIGHT_KEY, DOWN_KEY].includes(keyPressed)) {

        event.preventDefault();

      }



      if (changingDirection || !isGameRunning) return;

      changingDirection = true;



      const goingUp = dy === -1;

      const goingDown = dy === 1;

      const goingRight = dx === 1;

      const goingLeft = dx === -1;



      if (keyPressed === LEFT_KEY && !goingRight) {

        dx = -1;

        dy = 0;

      } else if (keyPressed === UP_KEY && !goingDown) {

        dx = 0;

        dy = -1;

      } else if (keyPressed === RIGHT_KEY && !goingLeft) {

        dx = 1;

        dy = 0;

      } else if (keyPressed === DOWN_KEY && !goingUp) {

        dx = 0;

        dy = 1;

      }

    }



    function startGame() {

      if (!isGameRunning) {

        isGameRunning = true;

        score = 0;

        snake = [{x: 10, y: 10}];

        dx = 0; // No initial movement

        dy = 0;

        generateFood();

        snakeScoreDisplay.textContent = `Pontos: ${score}`;

        localStorage.setItem('snakeScore', score); // Save score

        localStorage.setItem('snakeFood', JSON.stringify(food)); // Save food position

        localStorage.setItem('snakeBody', JSON.stringify(snake)); // Save snake body

        mainLoop();

      }

    }



    function resetSnakeGame() {

      showCustomConfirm('Tem certeza que deseja reiniciar o Jogo da Cobrinha?', (result) => {

        if (result) {

          isGameRunning = false;

          clearInterval(gameInterval);

          score = 0;

          snake = [{x: 10, y: 10}];

          dx = 0;

          dy = 0;

          generateFood();

          snakeScoreDisplay.textContent = `Pontos: ${score}`;

          clearCanvas(); // Clear canvas completely

          drawFood(); // Draw initial food

          snake.forEach(drawSnakePart); // Draw initial snake

          localStorage.removeItem('snakeScore');

          localStorage.removeItem('snakeFood');

          localStorage.removeItem('snakeBody');

        }

      });

    }



    function loadSnakeGameState() {

      const savedScore = localStorage.getItem('snakeScore');

      const savedFood = localStorage.getItem('snakeFood');

      const savedBody = localStorage.getItem('snakeBody');



      if (savedScore) score = parseInt(savedScore);

      if (savedFood) food = JSON.parse(savedFood);

      if (savedBody) snake = JSON.parse(savedBody);



      snakeScoreDisplay.textContent = `Pontos: ${score}`;

      draw();

    }



    function initSnakeGame() {

      if (!snakeGameContainer.dataset.initialized) {

        document.addEventListener('keydown', changeDirection);

        startGameButton.addEventListener('click', startGame);

        resetSnakeGameButton.addEventListener('click', resetSnakeGame);

        snakeGameContainer.dataset.initialized = true;

      }

      loadSnakeGameState(); // Always load state when showing the game

    }





    // --- Damas (Checkers) Game Logic ---

    const checkersBoardElement = document.getElementById('checkersBoard');

    const checkersStatus = document.getElementById('checkersStatus');

    const resetCheckersGameButton = document.getElementById('resetCheckersGameButton');

    const checkersModeRadios = document.querySelectorAll('input[name="checkersMode"]');
    const checkersDifficultyRadios = document.querySelectorAll('input[name="checkersDifficulty"]');
    const checkersDifficultySelection = document.getElementById('checkersDifficultySelection');


    let checkersBoard = []; // 8x8 array representing the board

    let checkersCurrentPlayer = 'red'; // 'red' or 'black'

    let checkersSelectedPiece = null; // {row, col} of the selected piece

    let checkersGameMode = 'player-vs-player'; // 'player-vs-player' or 'player-vs-ai'
    let checkersAIDifficulty = 'easy'; // 'easy', 'medium', 'hard'

    let isCheckersBlocked = false; // To prevent human input during AI turn



    function createEmptyBoard() {

      return Array(8).fill(null).map(() => Array(8).fill(null));

    }



    function initCheckersBoard() {

      checkersBoard = createEmptyBoard();

      // Place red pieces (top)

      for (let r = 0; r < 3; r++) {

        for (let c = 0; c < 8; c++) {

          if ((r + c) % 2 !== 0) { // Dark squares

            checkersBoard[r][c] = {player: 'red', isKing: false};

          }

        }

      }

      // Place black pieces (bottom)

      for (let r = 5; r < 8; r++) {

        for (let c = 0; c < 8; c++) {

          if ((r + c) % 2 !== 0) { // Dark squares

            checkersBoard[r][c] = {player: 'black', isKing: false};

          }

        }

      }

    }



    function drawCheckersBoard() {

      checkersBoardElement.innerHTML = '';

      for (let r = 0; r < 8; r++) {

        for (let c = 0; c < 8; c++) { // Corrected loop condition from c < 0 to c < 8

          const cell = document.createElement('div');

          cell.classList.add('checker-cell');

          cell.dataset.row = r;

          cell.dataset.col = c;



          if ((r + c) % 2 === 0) {

            cell.classList.add('light');

          } else {

            cell.classList.add('dark');

          }



          const piece = checkersBoard[r][c];

          if (piece) {

            const pieceElement = document.createElement('div');

            pieceElement.classList.add('checker-piece', piece.player);

            if (piece.isKing) {

              pieceElement.classList.add('king');

              pieceElement.textContent = '‚ôö'; // King emoji

            } else {

              pieceElement.textContent = '‚óè'; // Regular piece emoji

            }

            cell.appendChild(pieceElement);

          }

          checkersBoardElement.appendChild(cell);

        }

      }

      updateCheckersStatus();

      addCheckersEventListeners();

    }



    function updateCheckersStatus() {

      const redPieces = checkersBoard.flat().filter(p => p && p.player === 'red').length;

      const blackPieces = checkersBoard.flat().filter(p => p && p.player === 'black').length;



      if (redPieces === 0) {

        checkersStatus.textContent = `Fim de Jogo! Vencedor: Preto!`;

      } else if (blackPieces === 0) {

        checkersStatus.textContent = `Fim de Jogo! Vencedor: Vermelho!`;

      } else {

        checkersStatus.textContent = `Vez do ${checkersCurrentPlayer === 'red' ? 'Vermelho' : 'Preto'}`;

      }



      if (checkersGameMode === 'player-vs-ai' && checkersCurrentPlayer === 'black' && !isCheckersBlocked && redPieces > 0 && blackPieces > 0) {

        isCheckersBlocked = true; // Block human input

        setTimeout(() => makeAICheckersMove(checkersAIDifficulty), 1000); // AI moves after 1 second

      }

    }



    function addCheckersEventListeners() {

      document.querySelectorAll('#checkersBoard .checker-cell.dark').forEach(cell => {

        cell.removeEventListener('click', handleCheckersClick); // Prevent duplicate listeners

        cell.addEventListener('click', handleCheckersClick);

      });

    }



    function handleCheckersClick(event) {

      if (isCheckersBlocked || (checkersGameMode === 'player-vs-ai' && checkersCurrentPlayer === 'black')) {

        return; // Prevent human moves during AI turn

      }



      const clickedCellElement = event.target.closest('.checker-cell');

      if (!clickedCellElement) return;



      const row = parseInt(clickedCellElement.dataset.row);

      const col = parseInt(clickedCellElement.dataset.col);



      if (checkersSelectedPiece) {

        if (isValidCheckersMove(checkersSelectedPiece, {row, col})) {

          moveCheckersPiece(checkersSelectedPiece, {row, col});

          checkersSelectedPiece = null;

          switchCheckersPlayer();

          drawCheckersBoard();

          saveCheckersState();

        } else {

          checkersSelectedPiece = null;

          drawCheckersBoard(); // Redraw to remove selection highlight

        }

      } else {

        const piece = checkersBoard[row][col];

        if (piece && piece.player === checkersCurrentPlayer) {

          checkersSelectedPiece = {row, col};

          clickedCellElement.classList.add('selected');

          highlightPossibleCheckersMoves(row, col);

        }

      }

    }



    function highlightPossibleCheckersMoves(row, col) {

      document.querySelectorAll('.checker-cell.dark').forEach(cell => cell.classList.remove('selectable', 'selected', 'possible-move'));

      document.querySelector(`[data-row="${row}"][data-col="${col}"]`).classList.add('selected');



      const piece = checkersBoard[row][col];

      if (!piece) return;



      const moves = getAllValidCheckersMovesForPiece(row, col); // Get all valid moves including jumps

      moves.forEach(move => {

        const cellElement = document.querySelector(`[data-row="${move.to.row}"][data-col="${move.to.col}"]`);

        if (cellElement) {

          cellElement.classList.add('possible-move');

        }

      });

    }



    // Helper to get all valid moves for a piece (including jumps)

    function getAllValidCheckersMovesForPiece(r, c, board = checkersBoard) {
      const piece = board[r][c];
      if (!piece) return [];

      const player = piece.player;
      const isKing = piece.isKing;
      const moves = [];

      // Directions for normal moves and jumps
      const directions = isKing ? [[1,1], [1,-1], [-1,1], [-1,-1]] : 
                (player === 'red' ? [[1,1], [1,-1]] : [[-1,1], [-1,-1]]);

      for (const [dr, dc] of directions) {
        const nextR = r + dr;
        const nextC = c + dc;
        const jumpR = r + 2 * dr;
        const jumpC = c + 2 * dc;

        // Check for normal move
        if (nextR >= 0 && nextR < 8 && nextC >= 0 && nextC < 8 && !board[nextR][nextC]) {
          moves.push({ from: {row: r, col: c}, to: {row: nextR, col: nextC}, isJump: false });
        }

        // Check for jump move
        if (jumpR >= 0 && jumpR < 8 && jumpC >= 0 && jumpC < 8 &&
          board[nextR][nextC] && board[nextR][nextC].player !== player &&
          !board[jumpR][jumpC]) {
          moves.push({ from: {row: r, col: c}, to: {row: jumpR, col: jumpC}, jumped: {row: nextR, col: nextC}, isJump: true });
        }
      }
      return moves;
    }


    function getAllValidCheckersMoves(board, player) {

      let allMoves = [];

      for (let r = 0; r < 8; r++) {

        for (let c = 0; c < 8; c++) {

          const piece = board[r][c];

          if (piece && piece.player === player) {

            allMoves = allMoves.concat(getAllValidCheckersMovesForPiece(r, c, board));

          }

        }

      }

      return allMoves;

    }





    function isValidCheckersMove(from, to) {

      const piece = checkersBoard[from.row][from.col];

      if (!piece) return false;



      const dr = to.row - from.row;

      const dc = to.col - from.col;



      // Must move to an empty dark square

      if (checkersBoard[to.row][to.col] || (to.row + to.col) % 2 === 0) return false;



      const absDr = Math.abs(dr);

      const absDc = Math.abs(dc);



      // Normal move (1 diagonal step)

      if (absDr === 1 && absDc === 1) {

        if (piece.isKing) return true; // Kings can move any diagonal

        // Regular pieces can only move forward

        if (piece.player === 'red' && dr > 0) return true;

        if (piece.player === 'black' && dr < 0) return true;

      }

      // Jump move (2 diagonal steps)

      else if (absDr === 2 && absDc === 2) {

        const jumpedRow = from.row + dr / 2;

        const jumpedCol = from.col + dc / 2;

        const jumpedPiece = checkersBoard[jumpedRow][jumpedCol];



        if (jumpedPiece && jumpedPiece.player !== piece.player) {

          return true;

        }

      }

      return false;

    }





    function moveCheckersPiece(from, to, board = checkersBoard) {
      const piece = board[from.row][from.col];
      if (!piece) return;

      board[to.row][to.col] = piece;
      board[from.row][from.col] = null;

      // Check if it was a jump and remove the jumped piece
      const dr = to.row - from.row;
      const dc = to.col - from.col;
      if (Math.abs(dr) === 2 && Math.abs(dc) === 2) {
        const jumpedRow = from.row + dr / 2;
        const jumpedCol = from.col + dc / 2;
        board[jumpedRow][jumpedCol] = null;
      }

      // Check for kinging
      if (piece.player === 'red' && to.row === 7) {
        piece.isKing = true;
      } else if (piece.player === 'black' && to.row === 0) {
        piece.isKing = true;
      }
    }


    function switchCheckersPlayer() {

      checkersCurrentPlayer = checkersCurrentPlayer === 'red' ? 'black' : 'red';

    }



    function isCheckersGameOver(board) {

      const redPieces = board.flat().filter(p => p && p.player === 'red').length;

      const blackPieces = board.flat().filter(p => p && p.player === 'black').length;



      return redPieces === 0 || blackPieces === 0;

    }



    function saveCheckersState() {

      localStorage.setItem('checkersBoard', JSON.stringify(checkersBoard));

      localStorage.setItem('checkersCurrentPlayer', checkersCurrentPlayer);
      localStorage.setItem('checkersAIDifficulty', checkersAIDifficulty);

    }



    function loadCheckersState() {

      const savedBoard = localStorage.getItem('checkersBoard');

      const savedPlayer = localStorage.getItem('checkersCurrentPlayer');

      const savedMode = localStorage.getItem('checkersGameMode');
      const savedDifficulty = localStorage.getItem('checkersAIDifficulty');


      if (savedBoard) checkersBoard = JSON.parse(savedBoard);

      else initCheckersBoard();



      if (savedPlayer) checkersCurrentPlayer = savedPlayer;

      else checkersCurrentPlayer = 'red';



      if (savedMode) checkersGameMode = savedMode;

      else checkersGameMode = 'player-vs-player';

      // Set the radio button for the loaded mode
      document.querySelector(`input[name="checkersMode"][value="${checkersGameMode}"]`).checked = true;
      // Show/hide difficulty based on mode
      checkersDifficultySelection.style.display = (checkersGameMode === 'player-vs-ai') ? 'flex' : 'none';


      if (savedDifficulty) checkersAIDifficulty = savedDifficulty;
      else checkersAIDifficulty = 'easy';
      // Set the radio button for the loaded difficulty
      document.querySelector(`input[name="checkersDifficulty"][value="${checkersAIDifficulty}"]`).checked = true;


      drawCheckersBoard();

      updateCheckersStatus(); // Call to trigger AI move if applicable

    }



    function resetCheckersGame() {

      showCustomConfirm('Tem certeza que deseja reiniciar o jogo de Damas?', (result) => {

        if (result) {

          initCheckersBoard();

          checkersCurrentPlayer = 'red';

          checkersSelectedPiece = null;

          isCheckersBlocked = false; // Reset block

          drawCheckersBoard();

          saveCheckersState();

        }

      });

    }



    function initCheckersGame() {

      if (!checkersGameContainer.dataset.initialized) {

        resetCheckersGameButton.addEventListener('click', resetCheckersGame);



        checkersModeRadios.forEach(radio => {

          radio.addEventListener('change', (event) => {

            checkersGameMode = event.target.value;

            localStorage.setItem('checkersGameMode', checkersGameMode);
            checkersDifficultySelection.style.display = (checkersGameMode === 'player-vs-ai') ? 'flex' : 'none';
            resetCheckersGame(); // Reset game when mode changes

          });

        });

        checkersDifficultyRadios.forEach(radio => {
          radio.addEventListener('change', (event) => {
            checkersAIDifficulty = event.target.value;
            localStorage.setItem('checkersAIDifficulty', checkersAIDifficulty);
            resetCheckersGame(); // Reset game when difficulty changes
          });
        });

        checkersGameContainer.dataset.initialized = true;

      }

      loadCheckersState();

    }



    // --- Checkers AI Logic ---
    function makeAICheckersMove(difficulty) {
      let possibleMoves = getAllValidCheckersMoves(checkersBoard, 'black');
      let chosenMove = null;

      if (isCheckersGameOver(checkersBoard)) {
        isCheckersBlocked = false;
        return;
      }

      if (possibleMoves.length === 0) {
        isCheckersBlocked = false;
        showCustomAlert("AI n√£o tem movimentos poss√≠veis. Empate!");
        return;
      }

      if (difficulty === 'easy') {
        // Easy: Choose a random valid move
        chosenMove = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
      } else if (difficulty === 'medium') {
        // Medium: Prioritize jumps, then random normal moves
        let jumpMoves = possibleMoves.filter(move => move.isJump);
        if (jumpMoves.length > 0) {
          chosenMove = jumpMoves[Math.floor(Math.random() * jumpMoves.length)];
        } else {
          let normalMoves = possibleMoves.filter(move => !move.isJump);
          if (normalMoves.length > 0) {
            chosenMove = normalMoves[Math.floor(Math.random() * normalMoves.length)];
          }
        }
      } else if (difficulty === 'hard') {
        // Hard: Implement a basic heuristic or 1-ply lookahead
        // Prioritize: 1. Winning jumps, 2. Any jumps, 3. Kinging moves, 4. Safe moves
        let bestMove = null;
        let bestScore = -Infinity;

        for (const move of possibleMoves) {
          // Simulate the move
          let tempBoard = JSON.parse(JSON.stringify(checkersBoard)); // Deep copy
          moveCheckersPiece(move.from, move.to, tempBoard);

          let currentScore = 0;

          // 1. Winning move (capturing all opponent pieces)
          if (isCheckersGameOver(tempBoard) && tempBoard.flat().filter(p => p && p.player === 'red').length === 0) {
            currentScore += 1000;
          }
          // 2. Jumps
          if (move.isJump) {
            currentScore += 100;
          }
          // 3. Kinging move
          if (!checkersBoard[move.from.row][move.from.col].isKing && 
              ((checkersBoard[move.from.row][move.from.col].player === 'black' && move.to.row === 0) ||
               (checkersBoard[move.from.row][move.from.col].player === 'red' && move.to.row === 7))) {
            currentScore += 50;
          }
          // 4. Prevent opponent from winning (look one step ahead for opponent's winning moves)
          const opponentPlayer = (checkersCurrentPlayer === 'red' ? 'black' : 'red');
          const opponentMoves = getAllValidCheckersMoves(tempBoard, opponentPlayer);
          let opponentCanWin = false;
          for (const oppMove of opponentMoves) {
            let oppTempBoard = JSON.parse(JSON.stringify(tempBoard));
            moveCheckersPiece(oppMove.from, oppMove.to, oppTempBoard);
            if (isCheckersGameOver(oppTempBoard) && oppTempBoard.flat().filter(p => p && p.player === checkersCurrentPlayer).length === 0) {
              opponentCanWin = true;
              break;
            }
          }
          if (opponentCanWin) {
            currentScore -= 200; // Penalize moves that allow opponent to win
          }

          // Add some randomness to avoid predictable play
          currentScore += Math.random() * 5;

          if (currentScore > bestScore) {
            bestScore = currentScore;
            bestMove = move;
          }
        }
        chosenMove = bestMove;
      }


      if (chosenMove) {
        moveCheckersPiece(chosenMove.from, chosenMove.to);
        switchCheckersPlayer();
        drawCheckersBoard();
        saveCheckersState();
        isCheckersBlocked = false; // Unblock human input
      } else {
        // Fallback to random if no "best" move found (shouldn't happen if possibleMoves is not empty)
        chosenMove = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
        if (chosenMove) {
          moveCheckersPiece(chosenMove.from, chosenMove.to);
          switchCheckersPlayer();
          drawCheckersBoard();
          saveCheckersState();
          isCheckersBlocked = false;
        } else {
          isCheckersBlocked = false; // Unblock even if no move
          showCustomAlert("AI n√£o tem movimentos poss√≠veis. Empate!");
        }
      }
    }



    // --- Tic-Tac-Toe Game Logic ---

    const ticTacToeBoardElement = document.getElementById('ticTacToeBoard');

    const ticTacToeStatus = document.getElementById('ticTacToeStatus');

    const resetTicTacToeGameButton = document.getElementById('resetTicTacToeGameButton');

    const ticTacToeModeRadios = document.querySelectorAll('input[name="ticTacToeMode"]');
    const ticTacToeDifficultyRadios = document.querySelectorAll('input[name="ticTacToeDifficulty"]');
    const ticTacToeDifficultySelection = document.getElementById('ticTacToeDifficultySelection');


    let ticTacToeBoard = ['', '', '', '', '', '', '', '', '']; // Represents the 3x3 board

    let ticTacToeCurrentPlayer = 'X';

    let ticTacToeGameActive = true;

    let ticTacToeGameMode = 'player-vs-player'; // 'player-vs-player' or 'player-vs-ai'
    let ticTacToeAIDifficulty = 'easy'; // 'easy', 'medium', 'hard'

    let isTicTacToeBlocked = false; // To prevent human input during AI turn



    const ticTacToeWinningConditions = [

      [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows

      [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns

      [0, 4, 8], [2, 4, 6]       // diagonals

    ];



    function drawTicTacToeBoard() {

      ticTacToeBoardElement.innerHTML = '';

      ticTacToeBoard.forEach((cell, index) => {

        const cellElement = document.createElement('div');

        cellElement.classList.add('tic-tac-toe-cell');

        cellElement.dataset.index = index;

        cellElement.textContent = cell;

        if (cell === 'X') cellElement.classList.add('x');

        if (cell === 'O') cellElement.classList.add('o');

        ticTacToeBoardElement.appendChild(cellElement);

      });

      updateTicTacToeStatus();

      addTicTacToeEventListeners();

    }



    function updateTicTacToeStatus() {

      const winner = checkTicTacToeWinner();

      if (winner) {

        ticTacToeStatus.textContent = `O Jogador ${winner} Venceu!`;

        ticTacToeGameActive = false; // Ensure game is marked inactive

      } else if (ticTacToeBoard.every(cell => cell !== '')) {

        ticTacToeStatus.textContent = `Empate!`;

        ticTacToeGameActive = false; // Ensure game is marked inactive

      } else {

        ticTacToeStatus.textContent = `Vez do Jogador ${ticTacToeCurrentPlayer}`;

      }



      if (ticTacToeGameMode === 'player-vs-ai' && ticTacToeCurrentPlayer === 'O' && ticTacToeGameActive && !isTicTacToeBlocked) {

        isTicTacToeBlocked = true; // Block human input

        setTimeout(() => makeAITicTacToeMove(ticTacToeAIDifficulty), 1000); // AI moves after 1 second

      }

    }



    function addTicTacToeEventListeners() {

      document.querySelectorAll('#ticTacToeBoard .tic-tac-toe-cell').forEach(cell => {

        cell.removeEventListener('click', handleTicTacToeClick); // Remove existing to prevent duplicates

        cell.addEventListener('click', handleTicTacToeClick);

      });

    }



    function handleTicTacToeClick(event) {

      if (isTicTacToeBlocked || (ticTacToeGameMode === 'player-vs-ai' && ticTacToeCurrentPlayer === 'O')) {

        return; // Prevent human moves during AI turn or if blocked

      }



      const clickedCell = event.target;

      const clickedCellIndex = parseInt(clickedCell.dataset.index);



      if (ticTacToeBoard[clickedCellIndex] !== '' || !ticTacToeGameActive) {

        return;

      }



      ticTacToeBoard[clickedCellIndex] = ticTacToeCurrentPlayer;

      clickedCell.textContent = ticTacToeCurrentPlayer;

      clickedCell.classList.add(ticTacToeCurrentPlayer.toLowerCase());



      const winner = checkTicTacToeWinner();

      if (winner) {

        ticTacToeGameActive = false;

        updateTicTacToeStatus();

      } else if (ticTacToeBoard.every(cell => cell !== '')) {

        ticTacToeGameActive = false;

        updateTicTacToeStatus();

      } else {

        ticTacToeCurrentPlayer = ticTacToeCurrentPlayer === 'X' ? 'O' : 'X';

        updateTicTacToeStatus();

      }

      saveTicTacToeState();

    }



    function checkTicTacToeWinner(board = ticTacToeBoard) {

      for (let i = 0; i < ticTacToeWinningConditions.length; i++) {

        const [a, b, c] = ticTacToeWinningConditions[i];

        if (board[a] && board[a] === board[b] && board[a] === board[c]) {

          return board[a];

        }

      }

      return null;

    }



    function saveTicTacToeState() {

      localStorage.setItem('ticTacToeBoard', JSON.stringify(ticTacToeBoard));

      localStorage.setItem('ticTacToeCurrentPlayer', ticTacToeCurrentPlayer);

      localStorage.setItem('ticTacToeGameActive', ticTacToeGameActive);
      localStorage.setItem('ticTacToeAIDifficulty', ticTacToeAIDifficulty);

    }



    function loadTicTacToeState() {

      const savedBoard = localStorage.getItem('ticTacToeBoard');

      const savedPlayer = localStorage.getItem('ticTacToeCurrentPlayer');

      const savedGameActive = localStorage.getItem('ticTacToeGameActive');

      const savedMode = localStorage.getItem('ticTacToeGameMode');
      const savedDifficulty = localStorage.getItem('ticTacToeAIDifficulty');


      if (savedBoard) ticTacToeBoard = JSON.parse(savedBoard);

      else ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];



      if (savedPlayer) ticTacToeCurrentPlayer = savedPlayer;

      else ticTacToeCurrentPlayer = 'X';



      if (savedGameActive !== null) ticTacToeGameActive = JSON.parse(savedGameActive);

      else ticTacToeGameActive = true;



      if (savedMode) ticTacToeGameMode = savedMode;

      else ticTacToeGameMode = 'player-vs-player';

      // Set the radio button for the loaded mode
      document.querySelector(`input[name="ticTacToeMode"][value="${ticTacToeGameMode}"]`).checked = true;
      // Show/hide difficulty based on mode
      ticTacToeDifficultySelection.style.display = (ticTacToeGameMode === 'player-vs-ai') ? 'flex' : 'none';


      if (savedDifficulty) ticTacToeAIDifficulty = savedDifficulty;
      else ticTacToeAIDifficulty = 'easy';
      // Set the radio button for the loaded difficulty
      document.querySelector(`input[name="ticTacToeDifficulty"][value="${ticTacToeAIDifficulty}"]`).checked = true;


      drawTicTacToeBoard();

      updateTicTacToeStatus(); // Call to trigger AI move if applicable

    }



    function resetTicTacToeGame() {

      showCustomConfirm('Tem certeza que deseja reiniciar o Jogo da Velha?', (result) => {

        if (result) {

          ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];

          ticTacToeCurrentPlayer = 'X';

          ticTacToeGameActive = true;

          isTicTacToeBlocked = false; // Reset block

          drawTicTacToeBoard();

          saveTicTacToeState();

        }

      });

    }



    function initTicTacToe() {

      if (!ticTacToeGameContainer.dataset.initialized) {

        resetTicTacToeGameButton.addEventListener('click', resetTicTacToeGame);



        ticTacToeModeRadios.forEach(radio => {

          radio.addEventListener('change', (event) => {

            ticTacToeGameMode = event.target.value;

            localStorage.setItem('ticTacToeGameMode', ticTacToeGameMode);
            ticTacToeDifficultySelection.style.display = (ticTacToeGameMode === 'player-vs-ai') ? 'flex' : 'none';
            resetTicTacToeGame(); // Reset game when mode changes

          });

        });

        ticTacToeDifficultyRadios.forEach(radio => {
          radio.addEventListener('change', (event) => {
            ticTacToeAIDifficulty = event.target.value;
            localStorage.setItem('ticTacToeAIDifficulty', ticTacToeAIDifficulty);
            resetTicTacToeGame(); // Reset game when difficulty changes
          });
        });

        ticTacToeGameContainer.dataset.initialized = true;

      }

      loadTicTacToeState();

    }



    // --- Tic-Tac-Toe AI Logic ---
    function getEmptyTicTacToeCells(board) {
      const emptyCells = [];
      for (let i = 0; i < board.length; i++) {
        if (board[i] === '') {
          emptyCells.push(i);
        }
      }
      return emptyCells;
    }

    function makeAITicTacToeMove(difficulty) {
      const aiPlayer = 'O';
      const humanPlayer = 'X';
      const emptyCells = getEmptyTicTacToeCells(ticTacToeBoard);

      if (emptyCells.length === 0 || !ticTacToeGameActive) {
        isTicTacToeBlocked = false;
        return;
      }

      let chosenMove = -1;

      if (difficulty === 'easy') {
        // Easy: Pick a random empty cell
        chosenMove = emptyCells[Math.floor(Math.random() * emptyCells.length)];
      } else if (difficulty === 'medium') {
        // Medium:
        // 1. Check if AI can win
        for (const index of emptyCells) {
          ticTacToeBoard[index] = aiPlayer;
          if (checkTicTacToeWinner(ticTacToeBoard) === aiPlayer) {
            chosenMove = index;
            break;
          }
          ticTacToeBoard[index] = ''; // Undo
        }

        // 2. If not, check if human can win and block
        if (chosenMove === -1) {
          for (const index of emptyCells) {
            ticTacToeBoard[index] = humanPlayer;
            if (checkTicTacToeWinner(ticTacToeBoard) === humanPlayer) {
              chosenMove = index;
              break;
            }
            ticTacToeBoard[index] = ''; // Undo
          }
        }

        // 3. Otherwise, pick a random empty cell
        if (chosenMove === -1) {
          chosenMove = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        }

      } else if (difficulty === 'hard') {
        // Hard: Use Minimax to find the best move
        let bestScore = -Infinity;
        for (const index of emptyCells) {
          ticTacToeBoard[index] = aiPlayer;
          let score = minimax(ticTacToeBoard, 0, false, aiPlayer, humanPlayer);
          ticTacToeBoard[index] = ''; // Undo

          if (score > bestScore) {
            bestScore = score;
            chosenMove = index;
          }
        }
      }

      if (chosenMove !== -1) {
        ticTacToeBoard[chosenMove] = aiPlayer;
        ticTacToeCurrentPlayer = humanPlayer; // Switch player after AI move
        drawTicTacToeBoard();
        saveTicTacToeState();
        isTicTacToeBlocked = false; // Unblock human input
      } else {
        // This case should ideally not be reached if there are empty cells and minimax is used for 'hard'
        // But as a fallback for 'medium'/'easy' if something goes wrong
        isTicTacToeBlocked = false;
        showCustomAlert("AI n√£o conseguiu fazer um movimento. Empate!");
      }
    }


    // Minimax algorithm
    function minimax(board, depth, isMaximizingPlayer, aiPlayer, humanPlayer) {
      const winner = checkTicTacToeWinner(board);

      if (winner === aiPlayer) return 10 - depth;
      if (winner === humanPlayer) return depth - 10;
      if (board.every(cell => cell !== '')) return 0; // It's a tie

      if (isMaximizingPlayer) {
        let bestScore = -Infinity;
        for (let i = 0; i < board.length; i++) {
          if (board[i] === '') {
            board[i] = aiPlayer;
            let score = minimax(board, depth + 1, false, aiPlayer, humanPlayer);
            board[i] = '';
            bestScore = Math.max(score, bestScore);
          }
        }
        return bestScore;
      } else {
        let bestScore = Infinity;
        for (let i = 0; i < board.length; i++) {
          if (board[i] === '') {
            board[i] = humanPlayer;
            let score = minimax(board, depth + 1, true, aiPlayer, humanPlayer);
            board[i] = '';
            bestScore = Math.min(score, bestScore);
          }
        }
        return bestScore;
      }
    }



    // --- Tetris Game Logic ---

    const tetrisGameCanvas = document.getElementById('tetrisGameCanvas');

    const tetrisCtx = tetrisGameCanvas.getContext('2d');

    const tetrisNextPieceCanvas = document.getElementById('tetrisNextPieceCanvas');

    const tetrisNextPieceCtx = tetrisNextPieceCanvas.getContext('2d');



    const tetrisScoreDisplay = document.getElementById('tetrisScore');

    const tetrisLinesDisplay = document.getElementById('tetrisLines');

    const tetrisLevelDisplay = document.getElementById('tetrisLevel');

    const startTetrisButton = document.getElementById('startTetrisButton');

    const resetTetrisButton = document.getElementById('resetTetrisButton');

    const pauseTetrisButton = document.getElementById('pauseTetrisButton');



    const TETRIS_ROW = 20;

    const TETRIS_COL = 10;

    const TETRIS_SQ = 20; // Size of a single square in pixels

    const TETRIS_EMPTY = "BLACK"; // Color of empty squares



    // Pieces and their colors

    const TETRIS_PIECES = [

      // Z

      [[[1,1,0], [0,1,1], [0,0,0]], [[0,0,1], [0,1,1], [0,1,0]]],

      // S

      [[[0,1,1], [1,1,0], [0,0,0]], [[1,0,0], [1,1,0], [0,1,0]]],

      // T

      [[[0,1,0], [1,1,1], [0,0,0]], [[0,1,0], [0,1,1], [0,1,0]], [[0,0,0], [1,1,1], [0,1,0]], [[0,1,0], [1,1,0], [0,1,0]]],

      // O

      [[[1,1], [1,1]]],

      // L

      [[[0,0,1], [1,1,1], [0,0,0]], [[0,1,0], [0,1,0], [0,1,1]], [[0,0,0], [1,1,1], [1,0,0]], [[1,1,0], [0,1,0], [0,1,0]]],

      // J

      [[[1,0,0], [1,1,1], [0,0,0]], [[0,1,1], [0,1,0], [0,1,0]], [[0,0,0], [1,1,1], [0,0,1]], [[0,1,0], [0,1,0], [1,1,0]]],

      // I

      [[[0,0,0,0], [1,1,1,1], [0,0,0,0], [0,0,0,0]], [[0,1,0,0], [0,1,0,0], [0,1,0,0], [0,1,0,0]]]

    ];



    const TETRIS_COLORS = [

      "red", "green", "purple", "yellow", "orange", "blue", "cyan"

    ];



    let tetrisBoard = [];

    let tetrisScore = 0;

    let tetrisLines = 0;

    let tetrisLevel = 1;

    let tetrisDropStart;

    let tetrisGameInterval;

    let currentTetromino;

    let nextTetromino;

    let tetrisIsPaused = true;

    let tetrisGameOver = false;



    function drawSquare(x, y, color, ctx = tetrisCtx) {

      ctx.fillStyle = color;

      ctx.fillRect(x * TETRIS_SQ, y * TETRIS_SQ, TETRIS_SQ, TETRIS_SQ);

      ctx.strokeStyle = "black";

      ctx.strokeRect(x * TETRIS_SQ, y * TETRIS_SQ, TETRIS_SQ, TETRIS_SQ);

    }



    // Initialize the board with empty squares

    function initTetrisBoard() {

      for (let r = 0; r < TETRIS_ROW; r++) {

        tetrisBoard[r] = [];

        for (let c = 0; c < TETRIS_COL; c++) {

          tetrisBoard[r][c] = TETRIS_EMPTY;

        }

      }

    }



    // Draw the board

    function drawTetrisBoard() {

      for (let r = 0; r < TETRIS_ROW; r++) {

        for (let c = 0; c < TETRIS_COL; c++) {

          drawSquare(c, r, tetrisBoard[r][c]);

        }

      }

    }



    // Tetromino object constructor

    function Tetromino(shape, color) {

      this.shape = shape;

      this.color = color;

      this.rotation = 0; // Starts with the first rotation

      this.activeShape = this.shape[this.rotation];

      this.x = 3; // Initial X position

      this.y = -2; // Initial Y position (start slightly above board)

    }



    // Draw a tetromino

    Tetromino.prototype.draw = function(ctx = tetrisCtx) {

      for (let r = 0; r < this.activeShape.length; r++) {

        for (let c = 0; c < this.activeShape[r].length; c++) {

          if (this.activeShape[r][c]) {

            drawSquare(this.x + c, this.y + r, this.color, ctx);

          }

        }

      }

    };



    // Undraw a tetromino

    Tetromino.prototype.undraw = function() {

      for (let r = 0; r < this.activeShape.length; r++) {

        for (let c = 0; c < this.activeShape[r].length; c++) {

          if (this.activeShape[r][c]) {

            drawSquare(this.x + c, this.y + r, TETRIS_EMPTY);

          }

        }

      }

    };



    // Move tetromino down

    Tetromino.prototype.moveDown = function() {

      if (!this.collision(0, 1, this.activeShape)) {

        this.undraw();

        this.y++;

        this.draw();

      } else {

        this.lock(); // Lock piece if collision

        // Check for game over

        if (this.y <= 0) {

          tetrisGameOver = true;

          clearInterval(tetrisGameInterval);

          showCustomAlert(`Fim de Jogo! Pontua√ß√£o: ${tetrisScore}, Linhas: ${tetrisLines}`);

        } else {

          this.newTetromino();

        }

      }

    };



    // Move tetromino left

    Tetromino.prototype.moveLeft = function() {

      if (!this.collision(-1, 0, this.activeShape)) {

        this.undraw();

        this.x--;

        this.draw();

      }

    };



    // Move tetromino right

    Tetromino.prototype.moveRight = function() {

      if (!this.collision(1, 0, this.activeShape)) {

        this.undraw();

        this.x++;

        this.draw();

      }

    };



    // Rotate tetromino

    Tetromino.prototype.rotate = function() {

      const nextRotation = (this.rotation + 1) % this.shape.length;

      const nextShape = this.shape[nextRotation];

      const kick = this.collision(0, 0, nextShape); // Check collision after rotation

      if (!kick) {

        this.undraw();

        this.rotation = nextRotation;

        this.activeShape = nextShape;

        this.draw();

      } else {

        // Implement wall kick logic (simplified for now)

        if (this.x + nextShape[0].length > TETRIS_COL) { // Try to kick left if hit right wall

          this.undraw();

          this.x -= (this.x + nextShape[0].length - TETRIS_COL);

          this.rotation = nextRotation;

          this.activeShape = nextShape;

          this.draw();

        } else if (this.x < 0) { // Try to kick right if hit left wall

          this.undraw();

          this.x -= this.x; // Set x to 0

          this.rotation = nextRotation;

          this.activeShape = nextShape;

          this.draw();

        }

      }

    };





    // Collision detection

    Tetromino.prototype.collision = function(xOffset, yOffset, shapeToCheck) {

      for (let r = 0; r < shapeToCheck.length; r++) {

        for (let c = 0; c < shapeToCheck[r].length; c++) {

          // if it's an empty square, we don't care

          if (!shapeToCheck[r][c]) continue;



          let newX = this.x + c + xOffset;

          let newY = this.y + r + yOffset;



          // Check boundaries

          if (newX < 0 || newX >= TETRIS_COL || newY >= TETRIS_ROW) {

            return true;

          }
          // Avoid checking rows above board for collision with locked pieces
          if (newY < 0) continue; 


          // Check if the board position is already occupied by a locked piece

          if (tetrisBoard[newY][newX] !== TETRIS_EMPTY) {

            return true;

          }

        }

      }

      return false;

    };



    // Lock piece to the board

    Tetromino.prototype.lock = function() {

      for (let r = 0; r < this.activeShape.length; r++) {

        for (let c = 0; c < this.activeShape[r].length; c++) {

          if (this.activeShape[r][c]) {

            // Check for game over condition: piece locks above the board

            if (this.y + r < 0) {

              tetrisGameOver = true;

              break;

            }

            tetrisBoard[this.y + r][this.x + c] = this.color;

          }

        }

        if (tetrisGameOver) break;

      }



      if (tetrisGameOver) {

        clearInterval(tetrisGameInterval);

        showCustomAlert(`Fim de Jogo! Pontua√ß√£o: ${tetrisScore}, Linhas: ${tetrisLines}`);

        return;

      }



      // Remove full rows

      for (let r = 0; r < TETRIS_ROW; r++) {

        let isRowFull = true;

        for (let c = 0; c < TETRIS_COL; c++) {

          if (tetrisBoard[r][c] === TETRIS_EMPTY) {

            isRowFull = false;

            break;

          }

        }

        if (isRowFull) {

          for (let y = r; y > 1; y--) {

            for (let c = 0; c < TETRIS_COL; c++) {

              tetrisBoard[y][c] = tetrisBoard[y - 1][c];

            }

          }

          for (let c = 0; c < TETRIS_COL; c++) {

            tetrisBoard[0][c] = TETRIS_EMPTY;

          }

          tetrisLines++;

          tetrisScore += 100; // Example score for clearing a line

          tetrisLevel = 1 + Math.floor(tetrisLines / 10); // Increase level every 10 lines

        }

      }

      updateTetrisScore();

      drawTetrisBoard();

    };



    // Generate a new random tetromino

    Tetromino.prototype.newTetromino = function() {

      currentTetromino = nextTetromino;

      nextTetromino = generateRandomTetromino();

      drawTetrisBoard(); // Redraw board to clear old piece

      currentTetromino.draw(); // Draw current piece

      drawNextPiece(); // Draw the new next piece

    };



    function generateRandomTetromino() {

      const randomShapeIndex = Math.floor(Math.random() * TETRIS_PIECES.length);

      const randomColorIndex = Math.floor(Math.random() * TETRIS_COLORS.length);

      return new Tetromino(TETRIS_PIECES[randomShapeIndex], TETRIS_COLORS[randomColorIndex]);

    }



    // Draw the next piece on its dedicated canvas

    function drawNextPiece() {

      tetrisNextPieceCtx.clearRect(0, 0, tetrisNextPieceCanvas.width, tetrisNextPieceCanvas.height);

      // Center the next piece in its small canvas

      const nextPieceShape = nextTetromino.activeShape;

      const pieceWidth = nextPieceShape[0].length; // Width in squares

      const pieceHeight = nextPieceShape.length; // Height in squares



      // Calculate starting X and Y for centering in the next piece canvas

      const startX = (tetrisNextPieceCanvas.width / TETRIS_SQ - pieceWidth) / 2;

      const startY = (tetrisNextPieceCanvas.height / TETRIS_SQ - pieceHeight) / 2;



      for (let r = 0; r < nextPieceShape.length; r++) {

        for (let c = 0; c < nextPieceShape[r].length; c++) {

          if (nextPieceShape[r][c]) {

            // Draw at calculated offset + cell position

            drawSquare(startX + c, startY + r, nextTetromino.color, tetrisNextPieceCtx);

          }

        }

      }

    }



    // Game loop

    function tetrisDrop() {

      const now = Date.now();

      const delta = now - tetrisDropStart;

      const dropSpeed = 1000 - (tetrisLevel - 1) * 50; // Speed increases with level



      if (delta > dropSpeed) {

        currentTetromino.moveDown();

        tetrisDropStart = Date.now(); // Corrected from Date.2()

      }

      if (!tetrisGameOver && !tetrisIsPaused) {

        tetrisGameInterval = requestAnimationFrame(tetrisDrop);

      }

    }



    // Update score, lines, level display

    function updateTetrisScore() {

      tetrisScoreDisplay.textContent = tetrisScore;

      tetrisLinesDisplay.textContent = tetrisLines;

      tetrisLevelDisplay.textContent = tetrisLevel;

    }



    // Handle keyboard input for Tetris

    function controlTetris(event) {

      if (tetrisIsPaused || tetrisGameOver || event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.tagName === 'SELECT') {

        return;

      }

      event.preventDefault(); // Prevent page scrolling



      if (event.keyCode === 37) { // Left arrow

        currentTetromino.moveLeft();

      } else if (event.keyCode === 38) { // Up arrow (rotate)

        currentTetromino.rotate();

      } else if (event.keyCode === 39) { // Right arrow

        currentTetromino.moveRight();

      } else if (event.keyCode === 40) { // Down arrow (soft drop)

        currentTetromino.moveDown();

      } else if (event.keyCode === 32) { // Spacebar (hard drop)

        while (!currentTetromino.collision(0, 1, currentTetromino.activeShape)) {

          currentTetromino.undraw();

          currentTetromino.y++;

        }

        currentTetromino.draw();

        currentTetromino.lock();

        if (!tetrisGameOver) currentTetromino.newTetromino();

      }

    }



    function startTetrisGame() {

      if (tetrisIsPaused && !tetrisGameOver) {

        tetrisIsPaused = false;

        tetrisDropStart = Date.now();

        tetrisGameInterval = requestAnimationFrame(tetrisDrop);

        pauseTetrisButton.textContent = "Pausar Jogo";

      } else if (tetrisGameOver) {

        resetTetrisGame(); // Reset if game is over

      }

    }



    function pauseResumeTetrisGame() {

      if (tetrisGameOver) return;

      tetrisIsPaused = !tetrisIsPaused;

      if (tetrisIsPaused) {

        clearInterval(tetrisGameInterval);

        pauseTetrisButton.textContent = "Continuar Jogo";

      } else {

        tetrisDropStart = Date.now();

        tetrisGameInterval = requestAnimationFrame(tetrisDrop);

        pauseTetrisButton.textContent = "Pausar Jogo";

      }

    }



    function resetTetrisGame() {

      showCustomConfirm('Tem certeza que deseja reiniciar o Tetris?', (result) => {

        if (result) {

          clearInterval(tetrisGameInterval);

          tetrisBoard = [];

          initTetrisBoard();

          tetrisScore = 0;

          tetrisLines = 0;

          tetrisLevel = 1;

          tetrisGameOver = false;

          tetrisIsPaused = true; // Start paused



          currentTetromino = generateRandomTetromino();

          nextTetromino = generateRandomTetromino();



          drawTetrisBoard();

          currentTetromino.draw();

          drawNextPiece();

          updateTetrisScore();



          pauseTetrisButton.textContent = "Iniciar Jogo"; // Will be updated to "Pausar Jogo" by start button if clicked

        }

      });

    }



    function initTetrisGame() {

      if (!tetrisGameContainer.dataset.initialized) {

        document.addEventListener('keydown', controlTetris);

        startTetrisButton.addEventListener('click', startTetrisGame);

        resetTetrisButton.addEventListener('click', resetTetrisGame);

        pauseTetrisButton.addEventListener('click', pauseResumeTetrisGame);

        tetrisGameContainer.dataset.initialized = true;

      }

      // Always reset game state when showing Tetris to ensure a clean start

      // This is important because stopping all games clears the interval, but not the state.

      resetTetrisGame(); 

      // Set pause button text to "Iniciar Jogo" initially, as game starts paused

      pauseTetrisButton.textContent = "Iniciar Jogo"; 

    }



    // --- Color Customization Functions ---

    function saveCustomColors() {

      const customColors = {};

      for (const prop in customColorPickers) {

        customColors[prop] = customColorPickers[prop].value;

      }

      localStorage.setItem('customColors', JSON.stringify(customColors));

      localStorage.removeItem('selectedPresetTheme'); // Clear preset theme selection if custom colors are set

      clearPresetThemeSelection();

    }



    function applyColorsFromPickers() {

      for (const prop in customColorPickers) {

        document.documentElement.style.setProperty(prop, customColorPickers[prop].value);

      }

    }



    function loadInitialThemeAndColors() {

      const savedTheme = localStorage.getItem('selectedPresetTheme');

      const savedCustomColors = localStorage.getItem('customColors');

      const savedFieldBgAlpha = localStorage.getItem('fieldBgAlpha');

      const savedIsLightMode = localStorage.getItem('isLightMode');



      if (savedTheme && presetThemes[savedTheme]) {

        applyPresetTheme(savedTheme, false); // Apply without saving again

      } else if (savedCustomColors) {

        const colors = JSON.parse(savedCustomColors);

        for (const prop in colors) {

          if (customColorPickers[prop]) {

            customColorPickers[prop].value = colors[prop];

          }

        }

        applyColorsFromPickers();

        // Check if light mode was active with custom colors

        if (savedIsLightMode === 'true') {

          document.body.classList.add('light-mode');

        } else {

          document.body.classList.remove('light-mode');

        }

      } else {

        // Default to dark mode if nothing saved

        applyPresetTheme('default-dark', false);

      }



      if (savedFieldBgAlpha !== null) {

        const alpha = parseFloat(savedFieldBgAlpha);

        transparencySlider.value = alpha;

        transparencyValue.textContent = `${Math.round(alpha * 100)}%`;

        document.documentElement.style.setProperty('--field-bg-alpha', alpha);

      } else {

        // Set default transparency if not saved

        transparencySlider.value = 0.7;

        transparencyValue.textContent = '70%';

        document.documentElement.style.setProperty('--field-bg-alpha', 0.7);

      }
      loadFontSize(); // Load font size after theme and colors
    }



    function applyPresetTheme(themeName, save = true) {

      const theme = presetThemes[themeName];

      if (theme) {

        for (const prop in theme) {

          if (prop === 'isLightMode') {

            if (theme[prop]) {

              document.body.classList.add('light-mode');

            } else {

              document.body.classList.remove('light-mode');

            }

            localStorage.setItem('isLightMode', theme[prop]);

          } else {

            document.documentElement.style.setProperty(prop, theme[prop]);

            if (customColorPickers[prop]) {

              customColorPickers[prop].value = theme[prop];

            }

          }

        }

        if (save) {

          localStorage.setItem('selectedPresetTheme', themeName);

          localStorage.removeItem('customColors'); // Clear custom colors if a preset is applied

        }

        updateActivePresetButton(themeName);

      }

    }



    function updateColorPickersToCurrentTheme() {

      const rootStyles = getComputedStyle(document.documentElement);

      for (const prop in customColorPickers) {

        customColorPickers[prop].value = rootStyles.getPropertyValue(prop).trim();

      }

    }



    function resetCustomColors() {

      const currentThemeName = localStorage.getItem('selectedPresetTheme') || 'default-dark';

      applyPresetTheme(currentThemeName, false); // Reapply the current preset without saving it as a new selection

      localStorage.removeItem('customColors'); // Ensure custom colors are cleared

      updateColorPickersToCurrentTheme(); // Sync pickers to the reset theme

    }



    function applyRandomColors() {

      const randomColor = () => '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');

      for (const prop in customColorPickers) {

        customColorPickers[prop].value = randomColor();

      }

      saveCustomColors();

      applyColorsFromPickers();

      clearPresetThemeSelection();

      // Random colors can be light or dark, so we don't force light-mode class

      document.body.classList.remove('light-mode');

      localStorage.setItem('isLightMode', false);

    }



    function updateActivePresetButton(activeThemeName) {

      document.querySelectorAll('.theme-select-button').forEach(button => {

        button.classList.remove('active');

        if (button.dataset.theme === activeThemeName) {

          button.classList.add('active');

        }

      });

    }



    function clearPresetThemeSelection() {

      document.querySelectorAll('.theme-select-button').forEach(button => {

        button.classList.remove('active');

      });

    }



    // --- Background Image Functions ---

    function applyBackgroundImage(imageDataUrl) {

      if (imageDataUrl) {

        document.body.style.backgroundImage = `url('${imageDataUrl}')`;

        document.body.classList.add('has-background-image');

        localStorage.setItem('backgroundImage', imageDataUrl);

      } else {

        document.body.style.backgroundImage = 'none';

        document.body.classList.remove('has-background-image');

        localStorage.removeItem('backgroundImage');

      }

    }



    // --- Search Filtering Functions ---

    function filterHistory() {

      const searchTerm = historySearchInput.value.toLowerCase();

      const filtered = historyRecords.filter(record =>

        record.content.toLowerCase().includes(searchTerm) ||

        record.timestamp.toLowerCase().includes(searchTerm)

      );

      renderHistory(filtered);

    }



    function generateManualLookupContent() {

      let content = '';

      const searchTerm = manualLookupSearchInput.value.toLowerCase();



      // Iterate through motivesData to build the content

      for (const motivoKey in motivosData) {

        const motivoValue = motivosData[motivoKey];

        const motivoMatches = motivoKey.toLowerCase().includes(searchTerm);



        if (typeof motivoValue === 'string') {

          const descriptionMatches = motivoValue.toLowerCase().includes(searchTerm);

          if (motivoMatches || descriptionMatches) {

            content += `<h3>${applyHighlight(motivoKey, searchTerm)}</h3>`;

            content += `<p>${applyHighlight(motivoValue, searchTerm)}</p><hr>`;

          }

        } else if (typeof motivoValue === 'object') {

          let motivoContent = '';

          let hasSubtipoMatch = false;



          for (const subtipoKey in motivoValue) {

            const subtipoValue = motivoValue[subtipoKey];

            const subtipoMatches = subtipoKey.toLowerCase().includes(searchTerm);



            if (typeof subtipoValue === 'string') {

              const descriptionMatches = subtipoValue.toLowerCase().includes(searchTerm);

              if (subtipoMatches || descriptionMatches) {

                motivoContent += `<h4>${applyHighlight(subtipoKey, searchTerm)}</h4>`;

                motivoContent += `<p>${applyHighlight(subtipoValue, searchTerm)}</p>`;

                hasSubtipoMatch = true;

              }

            } else if (typeof subtipoValue === 'object') {

              let subtipoDetailContent = '';

              let hasDerivacaoMatch = false;



              for (const derivacaoKey in subtipoValue) {

                const derivacaoValue = subtipoValue[derivacaoKey];

                const derivacaoMatches = derivacaoKey.toLowerCase().includes(searchTerm);

                const descriptionMatches = derivacaoValue.toLowerCase().includes(searchTerm);



                if (derivacaoMatches || descriptionMatches) {

                  subtipoDetailContent += `<h5>${applyHighlight(derivacaoKey, searchTerm)}</h5>`;

                  subtipoDetailContent += `<p>${applyHighlight(derivacaoValue, searchTerm)}</p>`;

                  hasDerivacaoMatch = true;

                }

              }



              if (subtipoMatches || hasDerivacaoMatch) {

                motivoContent += `<h4>${applyHighlight(subtipoKey, searchTerm)}</h4>`;

                motivoContent += subtipoDetailContent;

                hasSubtipoMatch = true;

              }

            }

          }



          if (motivoMatches || hasSubtipoMatch) {

            content += `<h2>${applyHighlight(motivoKey, searchTerm)}</h2>`;

            content += motivoContent;

            content += `<hr class="double-line">`;

          }

        }

      }



      if (content === '') {

        manualLookupContent.innerHTML = '<p style="text-align: center; color: var(--label-color);">Nenhum resultado encontrado.</p>';

      } else {

        manualLookupContent.innerHTML = content;

      }

    }



    function filterManualLookup() {

      generateManualLookupContent();

    }



    function filterAdditionalInfo() {

      const searchTerm = additionalInfoSearchInput.value.toLowerCase();

      let filteredContent = originalAdditionalInfoContentHTML;



      if (searchTerm) {

        const tempDiv = document.createElement('div');

        tempDiv.innerHTML = originalAdditionalInfoContentHTML;



        // Function to recursively highlight text nodes

        function highlightTextNodes(node) {

          if (node.nodeType === Node.TEXT_NODE) {

            const parent = node.parentNode;

            const highlightedHtml = applyHighlight(node.nodeValue, searchTerm);

            const tempSpan = document.createElement('span');

            tempSpan.innerHTML = highlightedHtml;

            while (tempSpan.firstChild) {

              parent.insertBefore(tempSpan.firstChild, node);

            }

            parent.removeChild(node);

          } else if (node.nodeType === Node.ELEMENT_NODE) {

            if (node.tagName !== 'SCRIPT' && node.tagName !== 'STYLE') { // Avoid script/style tags

              Array.from(node.childNodes).forEach(highlightTextNodes);

            }

          }

        }

        highlightTextNodes(tempDiv);

        filteredContent = tempDiv.innerHTML;

      }



      additionalInfoContent.innerHTML = filteredContent;

      if (additionalInfoContent.textContent.toLowerCase().trim().includes(searchTerm) === false && searchTerm !== '') {

        additionalInfoContent.innerHTML = '<p style="text-align: center; color: var(--label-color);">Nenhum resultado encontrado nas informa√ß√µes adicionais.</p>';

      }

    }

    
    // Vari√°veis para controlar o tamanho da fonte
    let currentFontSize = 16; // Tamanho de fonte base em pixels
    const FONT_SIZE_STEP = 1; // Passo para aumentar/diminuir o tamanho da fonte
    const MIN_FONT_SIZE = 12; // Tamanho m√≠nimo da fonte
    const MAX_FONT_SIZE = 24; // Tamanho m√°ximo da fonte

    // Fun√ß√£o para aplicar o tamanho da fonte
    function applyFontSize(size) {
      document.body.style.fontSize = `${size}px`;
      // Salva o tamanho da fonte no localStorage
      localStorage.setItem('fontSize', size);
    }

    // Fun√ß√£o para carregar o tamanho da fonte salvo
    function loadFontSize() {
      const savedFontSize = localStorage.getItem('fontSize');
      if (savedFontSize) {
        currentFontSize = parseInt(savedFontSize, 10);
        applyFontSize(currentFontSize);
      } else {
        // Se n√£o houver tamanho salvo, use o tamanho inicial definido
        applyFontSize(currentFontSize);
      }
    }


    // --- Initial setup on DOMContentLoaded ---

    document.addEventListener('DOMContentLoaded', () => {

      const savedBackgroundImage = localStorage.getItem('backgroundImage');

      if (savedBackgroundImage) {

        applyBackgroundImage(savedBackgroundImage);

      }



      loadInitialThemeAndColors(); // This now also calls loadFontSize() internally



      originalAdditionalInfoContentHTML = additionalInfoContent.innerHTML;



      populateMotivos();

      generateManualLookupContent();

      loadHistory(); // This now also loads totalCopies

      loadSavedContent();



      // Load visibility states from localStorage

      if (localStorage.getItem('formVisible') === 'false') { // Default is 'block' if not set

        formContent.style.display = 'none';

      } else {

        formContent.style.display = 'block';

      }



      if (localStorage.getItem('notepadVisible') === 'true') {

        notepadContent.style.display = 'block';

      }

      if (localStorage.getItem('personalPasswordsVisible') === 'true') {

        personalPasswordsContent.style.display = 'block';

      }

      if (localStorage.getItem('historyVisible') === 'true') {

        historyContent.style.display = 'block';

      }

      if (localStorage.getItem('manualLookupVisible') === 'true') {

        manualLookupContent.style.display = 'block';

      }

      if (localStorage.getItem('additionalInfoVisible') === 'true') {

        additionalInfoContent.style.display = 'block';

      }

      if (localStorage.getItem('colorCustomizationVisible') === 'true') {

        colorCustomizationContent.style.display = 'block';

      }

      if (localStorage.getItem('recreationVisible') === 'true') {

        recreationContent.style.display = 'block';

        // Show the last active game
        // Ensure game mode and difficulty are loaded before showing the game
        const savedCheckersMode = localStorage.getItem('checkersGameMode');
        if (savedCheckersMode) {
          document.querySelector(`input[name="checkersMode"][value="${savedCheckersMode}"]`).checked = true;
          if (savedCheckersMode === 'player-vs-ai') {
            document.getElementById('checkersDifficultySelection').style.display = 'flex';
            const savedCheckersDifficulty = localStorage.getItem('checkersAIDifficulty');
            if (savedCheckersDifficulty) {
              document.querySelector(`input[name="checkersDifficulty"][value="${savedCheckersDifficulty}"]`).checked = true;
            }
          }
        }
        const savedTicTacToeMode = localStorage.getItem('ticTacToeGameMode');
        if (savedTicTacToeMode) {
          document.querySelector(`input[name="ticTacToeMode"][value="${savedTicTacToeMode}"]`).checked = true;
          if (savedTicTacToeMode === 'player-vs-ai') {
            document.getElementById('ticTacToeDifficultySelection').style.display = 'flex';
            const savedTicTacToeDifficulty = localStorage.getItem('ticTacToeAIDifficulty');
            if (savedTicTacToeDifficulty) {
              document.querySelector(`input[name="ticTacToeDifficulty"][value="${savedTicTacToeDifficulty}"]`).checked = true;
            }
          }
        }
        showGame(activeGame);

      }

      
      // Event Listeners para os bot√µes de tamanho de fonte
      if (decreaseFontSizeBtn) {
        decreaseFontSizeBtn.addEventListener('click', () => {
          if (currentFontSize > MIN_FONT_SIZE) {
            currentFontSize -= FONT_SIZE_STEP;
            applyFontSize(currentFontSize);
          }
        });
      }

      if (increaseFontSizeBtn) {
        increaseFontSizeBtn.addEventListener('click', () => {
          if (currentFontSize < MAX_FONT_SIZE) {
            currentFontSize += FONT_SIZE_STEP;
            applyFontSize(currentFontSize);
          }
        });
      }

    });

  </script>

</body>

</html>
